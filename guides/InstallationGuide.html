<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"><head>
<meta name="generator" content="HTML Tidy, see www.w3.org" /><title>Installing and Using CoffeeMud 5.11</title>

<link rel="StyleSheet" href="style.css" type="text/css" media="screen" /><!-- Modified by Josh Mueller, 2006-5-5, fix validation problems, add index, and fix spelling errors --></head>
<body>
<!--lynx -dump -width=80 http://coffeemud.net:27777/pub/guides/InstallationGuide.html > install.txt-->
<center>
<table border="1" bordercolor="gray" cellpadding="5" cellspacing="0" width="100%">
<tbody>
<tr>
<td colspan="2" align="left" bgcolor="#dfdfdf" width="100%">
<h1>Installing and Using CoffeeMud 5.11</h1>
</td>
</tr>
<tr>
<td align="left" valign="top" width="35%">
<ul>
<li><a href="#installation">Installation</a></li>
<li> <a href="#upgrading">Upgrading</a></li>
<li><a href="#settings">Settings</a></li>
<li><a href="#multihosts">Multiple Hosts</a></li>
<li><a href="#proxyserver">Proxy Server</a></li>
<li><a href="#integrations">Integrations
(Discord, X, AI, etc)</a></li>
<li><a href="#package">The CoffeeMud Package</a></li>
<li> <a href="#database">Using a Real
Database</a>
<ul>
<li><a href="#access">Microsoft Access</a></li>
<li><a href="#mysqlwin">MySQL/ Win</a></li>
<li><a href="#mysqllinux">MySQL/ Linux</a></li>
<li><a href="#hsql">HSQL</a></li>
<li><a href="#derby">Derby</a></li>
<li><a href="#dbtrouble">Database
Troubleshooting</a></li>
</ul>
</li>
<li><a href="#localization">Localization</a></li>
<li><a href="#shutdown">Offline/ Shutdown</a></li>
</ul>
</td>
<td style="text-align: left;" valign="top"> <img src="images/zip.jpg" alt="unzipping" />
<h2><a name="installation">Installation</a></h2>
<p>The first and most critical step in installing
CoffeeMud&nbsp;is to make sure that you have downloaded and
installed Oracle Java&nbsp;SDK/ JDK
1.8 or
better.&nbsp;If
you are using some flavor of Unix or Linux instead of Windows, make
sure you aren't trying to get by with GCJ, OpenJDK, or OpenJVM -- CoffeeMud does
not
support it, because it does not support CoffeeMud. &nbsp;You should
also make sure the "java" command is in your default PATH.</p>
<p>Now, if you are upgrading from a previous version of
CoffeeMud, you need to stop here and skip ahead to the section on
upgrading. If this is your first installation, keep reading.</p>
<p>Unpack the CoffeeMud.zip package
into a
directory on your hard drive. This directory may be called, for
instance, "CoffeeMud".</p>
<p>UNIX/Linux users may now want to run the quick
configuration tool. &nbsp;From a shell, cd into your CoffeeMud
directory and enter:<br />
</p>
<p><code>chmod +x config.sh<br />
./config.sh</code></p>
<p>Now, if you just want to try the system out, then
Congratulations: You have successfully installed CoffeeMud.</p>
<p>You may wish, at this point, to investigate the settings
and
components of the CoffeeMud server or use a real database instead of
the sample fakedb included.&nbsp; If so, by all means, continue
reading this document. If you couldn't care less, then go into the your
CoffeeMud directory on a command line or DOS prompt and enter (for
Windows or DOS users):</p>
<p><code>mud.bat Your Muds Name</code></p>
<p>And for Unix, Linux, or FreeBSD users, the command
differs
only in the classpath:</p>
<p><code>chmod +x mud.sh<br />
./mud.sh Your Muds Name</code></p>
<p>This will start up the CoffeeMud server. Remember to
change
the "Your Muds Name" to a unique name you want to
give your mud. If you are running Windows, you might also get away with
first modifying the file <code>mud.bat</code>
using your best text editor, and then executing that file.&nbsp;</p>
<p>Now, connect to the server on port 5555 using your
telnet or
other MUD client. Create yourself a new character. This new character
will be your administrative player, or Archon, so most of the player
settings, such as class, race, stats, etc. won't matter much (though I
would stay away from the Apprentice class). When your
character logs in for the first time, you will see a book in a room.
Your player should pick up the book and read it. The commands to do
this are:</p>
<pre>get book<br />read book<br /></pre>
<p>Doing this will turn your player into an Archon. An
Archon is
an all-powerful administrative player who is capable of all manner of
magical conjurations. You will probably want to import a bunch of areas
into your database right away. If so, you should enter:</p>
<pre>ahelp import<br /></pre>
<p>This will tell you how to import *.CMARE files, which
are
CoffeeMud formatted area files.&nbsp;Other formats are supported as
well.
&nbsp;Another way to quickly see some content in your mud is to
enter
this long command:</p>
<p><span style="font-family: monospace;">generate
area
random_dungeon&nbsp;areaname=MyRandomDungeon&nbsp;south</span></p>
<p>This will generate a
random 30-60 room dungeon based on one of the random&nbsp;themes in
the
/resources/randreas/example.xml file to the south of
your current room.</p>
<p>If you'd like to actually learn how to use the CoffeeMud
engine, you should do the following:</p>
<ul>
<li>Finish reading this document</li>
<li>Go through the <a href="../coffeemud.ini">coffeemud.ini</a>
file, and use the <a href="MUDGrinder.html">MudGrinders</a>
Control
Panel.</li>
<li style="list-style-type: none; list-style-image: none; list-style-position: outside;">
<ul>
<li>Set your DOMAIN field</li>
</ul>
<ul>
<li>Set your SMTPSERVERNAME field</li>
<li>Set your ADMINEMAIL and MUDSTATE fields</li>
<li>Set your START field</li>
<li>Set your SOUNDPATH field</li>
<li>Set your MXPIMAGEPATH field</li>
<li>Possibly change the HASHPASSWORDS field</li>
</ul>
</li>
<li>Read the <a href="ArchonGuide.html">Archon's
Guide</a>.</li>
<li>Review the <a href="GameBuildersGuide.html">Game
Builders
Guide</a>.</li>
<li>Check the <a href="BuildersFAQ.html">Builders
FAQ</a>.</li>
<li>Browse the <a href="Reference.html">Reference
Guide</a></li>
<li>Remember the <a href="WebServer.html">Web
Server Guide</a>.</li>
<li>Be aware of the <a href="SMTPServer.html">SMTP
Server Guide</a>.</li>
<li>Rely on the <a href="Programming.html">Programmers
Guide</a>.</li>
<li>Be amused with the <a href="RandomAreas.html">Random
Areas
Guide</a>.</li>
<li>Ignore the <a href="Protocols.html">Protocols
Guide</a>.</li>
</ul>
<p>Otherwise, once you have your administrator and a few
areas,
you are technically ready to play!</p>
<img src="images/mug.jpg" alt="CoffeeMud logo" />
<h2><a name="upgrading">Upgrading From a
Previous Version of
CoffeeMud</a></h2>
<p>Upgrading from an older to a new version of Coffeemud is
mostly a
matter of replacing old code with new code, adding the new files, and
merging configuration files that you previously changed.</p>
<p>First, shut down your mud and back up your existing
installation. &nbsp;I usally zip up the
CoffeeMud directory (or use tar -z). &nbsp;Put your backup file
aside.</p>
<p>Now, go into the CoffeeMud directory and obliterate the
entire "com" path. Just wipe it
away. You won't need it, and it will just cause problems anyway. If you
had any custom classes in there, you might want to pull them out first
and copy them elsewhere, or restore them from your backup.</p>
<p>Next, save away (in another directory) your
coffeemud.ini
file, and perhaps your mud.bat or mud.sh. Also save away any
files in the resources or web directory you might have customized to
your mud, including perhaps your resources/text/intro.txt file for
instance. &nbsp;Other files you might have changed include
resources/achivements.ini,
resources/titles.ini, or perhaps some of the skill recipes under
resources/skills/*.</p>
<p>Now unpack/unzip the new version of CoffeeMud on TOP
of
your olde one.</p>
<p>Open up the coffeemud.ini file that comes with the
new
version and also open up your olde customized coffeemud.ini file you
saved away in step 2. Merge over from the old ini file the settings
that
differ from the new one. The idea here is that the new coffeemud.ini
file may contain new settings you need to be aware of. However, your
old custom settings will still apply in the new version -- especially
your database settings for instance.</p>
<p>Copy your intro.txt on top of the one from the new
build.
As in step 4, merge any other files back into their counterparts in the
new build.</p>
Smile, you are done with the upgrade process. &nbsp;You can now
start up the new version.<br />
<br />
(Note:
if the database schema changed between your old and new version,
CoffeeMud will detect this and upgrade your database. &nbsp;If any
errors occur during this process, the mud will not start, and you
should consult the Troubleshooting section under "Using a Real
Database")<br />
<br />
<br />
<img src="images/settings.jpg" alt="settings" />
<h2><a name="settings">Settings</a></h2>
<p>All of the general purpose settings for the CoffeeMud
server
are kept in the INI file, called "coffeemud.ini". This file may be
modified with your favorite text editor: textpad, vi, emacs, copycon,
Whatever! If you are adventurous, you may also specify a custom ini
file other than "coffeemud.ini" by putting a boot= myfile.ini entry in
your startup line just before the name of your mud. Why would you want
to? I don't know, but you can.</p>
<p>If you are happy with the standard installation, you
will
usually also be content to leave most of the INI file alone. You will
eventually, however, probably find a need to at least modify the
"START" setting. Any changes to the coffeemud.ini file will require
that CoffeeMud be restarted before the changes will take effect.</p>
<p>Below are some of the more important configuration
settings to
be aware of in your ini file. There are actually many many more, but
they just aren't discussed here. The best way to modify those "other"
settings is through the Control Panel in the <a href="MUDGrinder.html">MUDGrinder</a>
web site.</p>
<ul>
<li> <span class="bold">SYSMSGS, ERRMSGS,
WRNMSGS, DBGMSGS,
ACCMSGS, HLPMSGS</span>
<p>These entries refer to logged system messages,
logged
error messages, warning messages,&nbsp;debug messages, web server
access logs, and help requests. When logging is
directed to a file, that file is called "mud.log". The possible values
for each of these settings is either "ON", which will direct the
indicated messages to the screen only, "OFF" to disable the messages
entirely, "FILE" to direct the messages to the "mud.log" file only,
"OWNFILE" to direct the messages to a file of its very own, or
"BOTH" for both screen and normal file output. By default, SYSMSGS,
WRNMSGS,
and ERRMSGS
are set to "BOTH", while DBGMSGS and ACCMSGS are set to "OFF", and
HLPMSGS set to "OWNFILE".</p>
</li>
<li> <span class="bold">PORT</span>
<p>This is the TCP/IP port number which the main
CoffeeMud
server will listen on. By default the setting is 5555. If you would
like to change this number to some other port, you may do so. You may
also add other numbers, separated by commas, to listen on multiple
ports. &nbsp;If you are using a proxy server, you may also specify
the servers hostname here (see below on the Proxy Server).</p>
</li>
<li>PROXY
<p>This
is blank, unless you are using the proxy server, in which case it is
the TCP/IP port number that players will connect to, and then forward
their connection to the mud server at the PORT above. &nbsp;See the
section in this guide on the Proxy Server for more information.</p>
</li>
<li>
<p>MUDSTATE<br />
<br />
This is a short description of the state of your mud as
you want it published to the I3 or IMC2 network. A number from 0
(meaning Development) to 3 (Live and Ready) is expected. </p>
</li>
<li><span class="bold">START</span>
<p>This setting designates the Room ID of the place on
your
map where new players will start off at. It also dictates where players
are brought to when the Recall skill is used. By default, an arbitrary
room ID has been assigned. Once you've put together a few areas, you
had better update this setting before new players start arriving.</p>
</li>
<li> <span class="bold">CHANNELS</span>
<p>This is a comma separated list of channels which the
users
of your system may converse publicly on. The channel names
given here are completely arbitrary and may be meaningful or whimsical
terms, though the names may not contains spaces. &nbsp;There are
lots
of options to peruse over here, and a couple of standard
channels are specified to get you started. The limit for the number of
standard channels
plus any InterMud channels (see <span class="bold">I3CHANNELS</span>
below) is 48 or so. &nbsp;That's more than plenty, right?</p>
</li>
<li> <span class="bold">BACKLOG</span>
<p>This TCP/IP setting denotes how many connections can
be
queued up when the server is busy. Leave it at 6.</p>
</li>
<li> <span class="bold">BIND</span>
<p>This TCP/IP setting will limit the IP addresses
which can
connect to your server. It is commented out by default, which means
that everyone is allowed to connect. Leave it that way, unless you want
your mud to be secret.</p>
</li>
<li> <span class="bold">RUNI3SERVER</span>
<p>This setting tells CoffeeMud whether to start up the
built-in InterMud3 server and make a connection to the InterMud router.
A value of "TRUE" will turn on the I3 server and make the connection.</p>
</li>
<li> <span class="bold">I3PORT</span>
<p>This is the TCP/IP port number which the main
InterMud3
server will listen on. By default the setting is 27766. If you would
like to change this number to some other port, you may do so. If the <span class="bold">RUNI3SERVER</span> entry above is FALSE,
this setting
will have no effect.</p>
</li>
<li> <span class="bold">I3CHANNELS</span>
<p>This is a comma separated list of InterMud3 channels
which
the users of your system may converse publicly on. Each channel entry
is separated by a comma. Each entry consists of a locale channel name
(no spaces in the name), followed by a space, followed by a mask to
limit who can view or chat on the channel, followed lastly by the name
of the InterMud3 channel to map this local channel
to. A couple of standard channels are specified. The limit for the
number of standard channels (see <span class="bold">CHANNELS</span>
above) plus any InterMud channels is 48.</p>
</li>
<li> <span class="bold">RUNWEBSERVERS</span>
<p>This setting tells CoffeeMud whether to start up the
built-in web servers. A value of "pub,admin" will turn on both of the
main web servers.
Even if you don't wish to publish any of your MUDs information to the
web, you may want to run the Admin web server so that you can use the
MUDGrinder area editing tool. See the <a href="MUDGrinder.html">MUDGrinder
Guide</a> for more information on this tool. For more information
on
the CoffeeMud web server in general, please read the <a href="WebServer.html">WebServer Guide</a>.</p>
</li>
<li> <span class="bold">RUNSMTPSERVER</span>
<p>This setting tells CoffeeMud whether to start up the
built-in SMTP (mail) server. A value of "TRUE" will turn on the SMTP
servers. Even if you don't wish to allow any incoming mail, you may
want to run the mail server so that you can create outgoing newsletters
for your players. For more information on the CoffeeMud SMTP server in
general, please read the <a href="SMTPServer.html">SMTPServer
Guide</a>.</p>
</li>
<li> <span class="bold">ITEMS, MOBS,
BEHAVIORS, ABILITIES,
CHARCLASSES, RACES, COMMANDS, LOCALES, AREAS, EXITS, etc&nbsp;</span>
<p>These settings each specify a path on your local
drive
which will contain Java class files. These class files are typically
classes which you might want to use with your CoffeeMud system, but
which are not included with the standard CoffeeMud distribution. See
the <a href="Programming.html">Programmer's Guide</a>
for more
information on writing custom classes for CoffeeMud.</p>
</li>
<li> <span class="bold">DBCLASS</span>
<p>This specifies the name of the Java class which will
be
used as your JDBC or ODBC database driver. If you are using a System
ODBC data source, this entry will typically be
"sun.jdbc.odbc.JdbcOdbcDriver". By default, however, the CoffeeMud
"fakedb" package is installed. The driver name for this class is
"com.planet_ink.fakedb.Driver". See the next section on "The CoffeeMud
Database" for more information.</p>
</li>
<li> <span class="bold">DBSERVICE</span>
<p>This is the name of the JDBC or ODBC Service as
defined by
your local operating system. It typically denotes the name of the ODBC
service, or the name of the database in other instances. For a System
ODBC service, this value will typically look like
"jdbc:odbc:SystemServiceName". By default, however, the fakedb package
is used. The format of the service name for fakedb is
"jdbc:fakedb:DataPath". Where DataPath is a local drive path containing
the "fakedb.schema" file, where your flat data files will be created.
See the section on "The CoffeeMud Database" for more information.</p>
</li>
<li> <span class="bold">DBUSER, DBPASS</span>
<p>This specifies the name and password which may or
may not
be required to log into your ODBC service, or database. Not required
for fakedb, and thus blank by default.</p>
</li>
<li> <span class="bold">DBCONNECTIONS</span>
<p>This is the number of independent connections to
make to
the database through your JDBC/ODBC driver. 1 or 2 is plenty. CoffeeMud
is not especially database intensive.</p>
</li>
<li> <span class="bold">DBREUSE,
DBPINGINTERVALS</span>
<p>These are for tweaking how CoffeeMud uses database
connections. &nbsp;DBREUSE is true to permit the mud to re-use
existing
connections over and over, instead of making new ones. &nbsp;When
DBREUSE is true, DBPINGINTERVALS will help you keep them alive during
dormancy by saying how frequently to ping those connections with a
trivial query.</p>
</li>
<li>HASHPASSWORDS <br />
This
defines whether passwords are hashed before saving to the DB. It
provides some level of security for those who don't trust their
DB&nbsp;admins, or expose their DB to others.&nbsp; However,
when users
forget their passwords, the user will have to generate a new password
to email it. Set to YES to start hashing passwords.<br />
</li>
</ul>
<p>* In Addition to the above, you will find other numerous
flags
and settings which allow you to better customize your CoffeeMud. Make
sure you check out the Control Panel feature in the MUDGrinder to
modify most of&nbsp;them.</p>
<p><img style="width: 73px; height: 73px;" src="images/sprockets.jpg" alt="packages" /> </p>
<h2><a name="multihosts">Multiple Hosts</a></h2>
<p>There may be circumstances under which you may want to
run
your mud not only on multiple ports, but with multiple configurations,
or multiple maps, perhaps even multiple player bases. &nbsp;This is
accomplished by including the "BOOT=" command line parameter multiple
times. &nbsp;Each occurrence should be followed by the name of a
valid
coffeemud ini file, as described in the previous section. &nbsp;The
server will then attempt to boot two muds in the same Java environment,
each relying to some extent on their own ini files for database and
other information.</p>
<p><code>java -classpath
".:./lib/js.jar:./lib/jzlib.jar
-Xmx256m com.planet_ink.coffee_mud.application.MUD
boot=coffeemud1.ini boot=coffeemud2.ini "Your Two-Headed Muds Common
Name"</code></p>
<p>The first BOOT parameter is considered by the CoffeeMud
Engine
to be the Primary Host (HOST0), and any game resources that are shared
will be done&nbsp;with this host. &nbsp;Subsequent ini file
configurations will rely on the Primary Hosts ini file to fill in any
gaps in necessary configuration entries. &nbsp;Subsequent hosts
will
also use their own ini files to select which resources to share with
the Primary Host, and which to manage&nbsp; independently,
separately,
and privately from the Primary host. &nbsp;</p>
<p>Important INI file entries for Subsequent Host ini files:</p>
<p>PORT: required in all ini files. &nbsp;No host will
boot
without at least one unique value here.<br />
DBCLASS: if a subsequent hosts ini file contains a DBCLASS entry, then
that host will manage its own private Database connections.&nbsp;<br />
NUMLOGS, SYSMSGS, ERRMSGS, etc: manage its own log file. &nbsp;<br />
SYSOPMASK, JSCRIPT, GROUP_*: manage its own security settings<br />
RUNWEBSERVERS: launch its own web servers<br />
RUNSMTPSERVER: launch its own smtp server (but why?!)<br />
RUNI3SERVER, other I3 settings: always ignored. Only the Primary Host
may launch I3 servers and clients.<br />
RUMIMC2CLIENT, other IMC2 settings: always ignored. &nbsp;Only the
Primary Host may launch IMC2 clients.<br />
PRIVATERESOURCES: defines resources not shared with the Primary Host.
See below.<br />
</p>
<p>All other&nbsp;ini file entries will either be
specified in
the Subsequent Hosts ini
file and therefore unique, or they will not be specified, and therefore
have their values copied from the Primary Host ini file. &nbsp;</p>
<p>The PRIVATERESOURCES entry defines which of the
CoffeeMud
engines primary resources will be private to the Subsequent Host,
meaning not shared with the Primary Host. &nbsp;This ini file entry
is
a comma-delimited list of resources to maintain privately in the
Subsequent Host, and is defined only in each Subsequent Hosts ini file.
&nbsp;Each resource manages a different sphere of MUD
activity, so it is wise to consider carefully the interactions of
shared and unshared resources. &nbsp;For instance, the CHANNELS
resource manages list of channel names and their functions, while
SESSIONS manages the list of online players and who may speak to each
other over channels, JOURNALS the list of command journals, STATS the
player statistics, MAP the world map, LOGINS the list of start rooms,
QUEST the list of quests, FACTIONS your factions list, CLANS the player
clans, POLLS the online polls, CATALOG your item drop tables and object
catalogs, PLAYERS the player cache and tables, TITLES your automatic
vanity titles, TIME the global calendar/clock, DBVFS the
database-portion of your file system (very
important if you want different intro.txt or other files for different
hosts), and the various object types if you want to prevent your
builders to have different available objects on different hosts.</p>
<p>It is recommended that your subsequent ini files
include, at
least the PORT, one new administrative RUNWEBSERVERS entry, a DBCLASS
entry pointing to a dedicated CoffeeMud database for each host, and
several PRIVATERESOURCES.. probably DBVFS, PLAYERS,&nbsp;MAP,
STATS,
QUEST, and CLANS. &nbsp; &nbsp;If you dont want your players to
be able
to chat with each other over channels, or see each other with the WHO
command, you might add CHANNELS and SESSIONS to the list as well.</p>
<p><img style="width: 73px; height: 73px;" src="images/bridge.jpg" alt="packages" /> </p>
<h2><a name="proxyserver">Proxy Server</a></h2>
<p>The
CoffeeMud server will not crash on you, and you are unlikely to make
changes that require rebooting it, but if either of those unlikely
circumstances arise, the optional proxy server may be the answer.
&nbsp;A proxy server accepts direct connections from your players,
and
then connects to the main&nbsp;CoffeeMud server on their behalf,
acting
as a kind of "middleman" for player connections. &nbsp; One
benefit of a&nbsp;proxy server is that, should the CoffeeMud server
connection be
lost due to either a crash or shutdown, it can notify the player that
something has gone wrong, and then attempt to automatically reconnect
to the main server when it becomes available again. &nbsp;</p>
<p>Another benefit is that a proxy server can act as a load
balancer. &nbsp;If you run multiple mud servers, and want your
players to be distributed amongst them, the proxy server can do that
for you as well.</p>
<p>Before
you can run a proxy server, you must first specify the&nbsp;PROXY
port
in your coffeemud.ini file. &nbsp;This is the port number that
players
will connect to instead of the main server PORT. &nbsp;The proxy
server
will then use the exact same ini file(s) as the main server during
startup. &nbsp;If you are using multiple hosts (see above), then
additional ini files may be specified in the exact same way. &nbsp;</p>
<p>The
PORT and PROXY port numbers should always be different from each other,
unless
the mud and proxy servers are running on different machines, in which
case you must specify the mud servers host name in the PORT field in
the <span style="font-family: monospace;">hostname:port</span>
format.</p>
<p>The
next thing to modify in your coffeemud.ini file is the MPCPKEY entry.
&nbsp;Change it to absolutely anything you want. &nbsp;This
string acts
as a 'password' between the mud server and the proxy server, ensuring
that they can trust the information they share. &nbsp;The "MPCP"
part
of the name refers to the Mud Proxy Control Protocol, in case you want
to google that and read more about it.</p>
<p>Starting the proxy server is very similar to starting
the main mud server:<br />
</p>
<p><code>java -classpath
".;.\lib\js.jar;.\lib\jzlib.jar"
-Xmx85m com.planet_ink.coffee_mud.application.MUDProxy
BOOT=coffeemud.ini STRATEGY=ROUNDROBIN</code></p>
<p>And for Unix, Linux, or FreeBSD users, the command
differs
only in the classpath:</p>
<p><code>java -classpath
".:./lib/js.jar:./lib/jzlib.jar"
-Xmx85m com.planet_ink.coffee_mud.application.MUDProxy</code><code>
BOOT=coffeemud.ini STRATEGY=ROUNDROBIN</code></p>
<p>In
addition to the BOOT= argument to specifying ini files, the proxy
server can also accept a STRATEGY argument that can be set to either
ROUNDROBIN, RANDOM, or LEASTCONN. &nbsp;The strategy is only
necessary
you have set up the proxy server as a load balancer by having multiple
mud servers listening on the same PROXY port, and
need the proxy server to choose between them when a player connects.</p>
<p>Once
the proxy server starts, it will generate a proxy.log file containing a
startup message that should confirm that you've set it up correctly.
&nbsp;It does not matter whether you start the proxy server first,
or
the mud server first, but both must be running for everything to work
as you want it to. &nbsp;Because they both use the same ini files,
the
CoffeeMud server will also see the PROXY and MPCPKEY entries, and will
report the PROXY port as its publicly accessible port for users,
instead of its normal listening PORT.</p>
<p>From
inside a CoffeeMud connected to the proxy server, you can use the
PROXYCTL command. &nbsp;It requires the random password that is
only
shown when the proxy server is started.</p>
<p><img style="width: 73px; height: 73px;" src="images/integrations.jpg" alt="packages" /> </p>
<h2><a name="integrations">Integrations</a></h2>
CoffeeMud supports several different integrations with external
services, so let's go through which those are, and how to take
advantage of them.<br />
<br />
<h3>Discord</h3>
This is a two-way channel message interface with the popular
chat site/app "Discord" through a fantastic library called "Javacord".
&nbsp;As suggested, it allows the CoffeeMud administrator to tie
specific in-game message channels to specific Discord channels on a
particular Discord server. &nbsp;Messages then sent from on this
channel from either end are received and displayed at the other.<br />
<br />
The
Javacord interface requires quite a bit of setup, as well as
cooperation from the administrator of the Discord server itself.<br />
<br />
The first step is to visit '<a href="https://discord.com/developers/docs/intro">https://discord.com/developers/docs/intro</a>'
and create an account.<br />
<br />
After
authorized, you can click on the Applications tab on the left and then
click New Application button on the upper right. &nbsp;Give your
app a
name. &nbsp;Now select the "Bot" tab on the left and set the
Username
to your unique Mud name. &nbsp;Under "Privileged Gateway Intents",
make
sure all of the Intents are turned ON. &nbsp;Also, make sure you
copy
your Bot Token and keep it somewhere safe -- you'll need it later.
&nbsp;After saving everything, you are done with the Discord App.<br />
<br />
The third step is to visit <a href="https://coffeemud.org/">https://coffeemud.org/</a>
and download the Discord (Javacord) jar file from the link under
"Downloading the Software". &nbsp;Save this jar file in your
Coffeemud
"lib" directory for reference later. &nbsp;If you find a more
updated
version of the jar file, that will probably be fine also.<br />
<br />
The fourth step is open up your coffeemud.ini file and make several
changes. &nbsp;Set your Javacord lib path:<br />
<div style="padding: 0px 0px 0px 2px; background-color: rgb(255, 255, 255);">
<div style="color: rgb(0, 0, 0); background-color: rgb(255, 255, 255); font-family: &quot;Courier New&quot;; font-size: 10pt; white-space: nowrap;">
<p style="background-color: rgb(232, 242, 254);"><span style="color: rgb(63, 127, 95);">DISCORD_JAR_PATH=/</span><span style="color: rgb(63, 127, 95); text-decoration: underline;">lib</span><span style="color: rgb(63, 127, 95);">/</span><span style="color: rgb(63, 127, 95); text-decoration: underline;">javacord</span><span style="color: rgb(63, 127, 95);">-3.9.0-shaded.jar</span></p>
</div>
</div>
... and set your discord bot key to the token you copied earlier:<br />
<div style="padding: 0px 0px 0px 2px; background-color: rgb(255, 255, 255);">
<div style="color: rgb(0, 0, 0); background-color: rgb(255, 255, 255); font-family: &quot;Courier New&quot;; font-size: 10pt; white-space: nowrap;">
<p style="background-color: rgb(232, 242, 254);"><span style="color: rgb(63, 127, 95);">DISCORD_BOT_KEY=....</span></p>
</div>
</div>
Now you can go up to the CHANNELS= &nbsp;entry and either add
some new channels to correspond with various Discord server channels
with the DISCORD=channelname flag. &nbsp;Do not include the
hash-marks
in the channel names.<br />
<br />
After saving your coffeemud.ini file,
the fifth step is to restart your CoffeeMud server and look for any
discord error messages in the log file. &nbsp;Also look for an
entry
that looks like this:<br />
Discord Bot auth url: <span style="font-family: monospace;">https://discord.com/oauth2/authorize?client_id=..
..&amp;scope=bot%20applications.commands&amp;permissions=2048&amp;prompt=consent</span><br />
<br />
Put that link into your browser and authorize your app to interact with
the server with messaging privileges.<br />
<br />
The
last step is contact the administrator of your Discord server and ask
them to authorize your bot for the server. &nbsp;You may need to
provide your apps name. &nbsp;This will be done under the
"Integrations" area of Discord server administration.<br />
<br />
After this last is done, you *may* need to restart CoffeeMud one more
time -- I'm not sure, so give your channels a test.<br />
<br />
<h3>AI / LLM (Large Language Models): ChatGPT, OLLAMA, etc.</h3>
LLMs (aka Artificial Intelligence or AI) are chat bots that provide a
text-based game like CoffeeMud with a myriad of interesting abilities.
&nbsp; Through the <a href="https://github.com/langchain4j/langchain4j">LangChain4J</a>
library, CoffeeMud can integrate with any of the following LLMs or LLM
services: Amazon Bedrock, Anthropic, Azure OpenAI, ChatGLM, DashScope,
GitHub Models, Google AI Gemini, Google Vertex AI Gemini, Google Vertex
AI PaLM 2, Hugging Face, Jlama, LocalAI, Mistral AI, Ollama, OpenAI
(compatible with Ollama, LM Studio, GPT4All, Groq, etc.), Oracle Cloud
Infrastructure GenAI, Qianfan, Cloudflare Workers AI, and Zhipu AI.<br />
<p>The LangChain4J interface requires quite a bit of setup,
as well as
cooperation from the service being integrated with. &nbsp;So your
first step will be to create an account with the service you wish to
use and acquire whatever API keys and information you need.<br />
<br />
The second step is to visit <a href="https://coffeemud.org/">https://coffeemud.org/</a>
and download the LangChain4J jar file from the link under
"Downloading the Software". &nbsp;Save this jar file in your
Coffeemud
"lib" directory for reference later. &nbsp;Do not try to use any
other version of their software for now, as the provided jar contains
ALL of the integrations as well as the core library. &nbsp;This
library <span style="font-weight: bold;">requires</span>
that CoffeeMud main server be run with <span style="font-weight: bold;">Java 17</span> or higher,
instead of the base requirement of Java 8.<br />
<br />
The third step is open up your coffeemud.ini file and make several
changes. &nbsp;Set your javacord lib path:<br />
</p>
<div style="padding: 0px 0px 0px 2px; background-color: rgb(255, 255, 255);">
<div style="color: rgb(0, 0, 0); background-color: rgb(255, 255, 255); font-family: &quot;Courier New&quot;; font-size: 10pt; white-space: nowrap;">
<p style="background-color: rgb(232, 242, 254);"><span style="color: rgb(63, 127, 95);">LANGCHAIN4J_JAR_PATH=/</span><span style="color: rgb(63, 127, 95); text-decoration: underline;">lib</span><span style="color: rgb(63, 127, 95);">/</span><span style="color: rgb(63, 127, 95); text-decoration: underline;">langchain4j-uber-1.2.0-beta8-SNAPSHOT.jar</span><span style="color: rgb(63, 127, 95);"></span></p>
</div>
</div>
... and set your llm type to the nickname of the provider from the
table below. &nbsp;Each provider will also require additional INI
file entries which you will need to add to your coffeemud.ini file.
&nbsp;The name of each additional required field is also in the
table below. &nbsp;The meaning and format of the additional fields
are beyond the scope of my understanding, so you'll either need to
divine their purpose from the provider itself, or poke through the
LangChain4J documentation.<br />
<div style="padding: 0px 0px 0px 2px; background-color: rgb(255, 255, 255);">
<div style="color: rgb(0, 0, 0); background-color: rgb(255, 255, 255); font-family: &quot;Courier New&quot;; font-size: 10pt; white-space: nowrap;">
<p style="background-color: rgb(232, 242, 254);"><span style="color: rgb(63, 127, 95);">LANGCHAIN4J_LLM_TYPE=....</span></p>
</div>
</div>
<br />
<table>
<tbody>
<tr>
<th>LLM Type/Nickname</th>
<th>Required Methods</th>
</tr>
<tr>
<td>OLLAMA</td>
<td>LANGCHAIN4J_BASEURL, LANGCHAIN4J_MODELNAME</td>
</tr>
<tr>
<td>ANTHROPIC</td>
<td>LANGCHAIN4J_APIKEY</td>
</tr>
<tr>
<td>AZURE</td>
<td>LANGCHAIN4J_ENDPOINT, LANGCHAIN4J_APIKEY,
LANGCHAIN4J_DEPLOYMENTNAME</td>
</tr>
<tr>
<td>DASHSCOPE</td>
<td>LANGCHAIN4J_APIKEY</td>
</tr>
<tr>
<td>GITHUB</td>
<td>LANGCHAIN4J_GITHUBTOKEN, LANGCHAIN4J_MODELNAME</td>
</tr>
<tr>
<td>GEMINI</td>
<td>LANGCHAIN4J_APIKEY</td>
</tr>
<tr>
<td>VERTEXGEMINI</td>
<td>LANGCHAIN4J_PROJECT, LANGCHAIN4J_LOCATION,
LANGCHAIN4J_MODELNAME</td>
</tr>
<tr>
<td>VERTEXPALM2</td>
<td>LANGCHAIN4J_ENDPOINT, LANGCHAIN4J_LOCATION,
LANGCHAIN4J_PUBLISHER, LANGCHAIN4J_PROJECT, LANGCHAIN4J_MODELNAME</td>
</tr>
<tr>
<td>HUGGINGFACE</td>
<td>LANGCHAIN4J_APIKEY, LANGCHAIN4J_MODELID</td>
</tr>
<tr>
<td>JLAMA</td>
<td>LANGCHAIN4J_MODELPATH</td>
</tr>
<tr>
<td>LOCALAI</td>
<td>LANGCHAIN4J_BASEURL, LANGCHAIN4J_MODELNAME</td>
</tr>
<tr>
<td>MISTRAL</td>
<td>LANGCHAIN4J_APIKEY</td>
</tr>
<tr>
<td>OPENAI</td>
<td>LANGCHAIN4J_APIKEY</td>
</tr>
<tr>
<td>ORACLEGENAI</td>
<td>LANGCHAIN4J_COMPARTMENTID</td>
</tr>
<tr>
<td>QIANFAN</td>
<td>LANGCHAIN4J_APIKEY, LANGCHAIN4J_SECRETKEY</td>
</tr>
<tr>
<td>CLOUDFLARE</td>
<td>LANGCHAIN4J_ACCOUNTID, LANGCHAIN4J_APITOKEN,
LANGCHAIN4J_MODELNAME</td>
</tr>
<tr>
<td>ZHIPUAI</td>
<td>LANGCHAIN4J_APIKEY</td>
</tr>
<tr>
<td>BEDROCK_ANTHROPIC</td>
<td>(uses AWS environment variables)</td>
</tr>
<tr>
<td>BEDROCK_COHERE</td>
<td>(uses AWS environment variables)</td>
</tr>
<tr>
<td>BEDROCK_LLAMA</td>
<td>(uses AWS environment variables)</td>
</tr>
<tr>
<td>COHERE</td>
<td>LANGCHAIN4J_APIKEY</td>
</tr>
<tr>
<td>DEEPINFRA</td>
<td>LANGCHAIN4J_APIKEY</td>
</tr>
<tr>
<td>GROQ</td>
<td>LANGCHAIN4J_APIKEY</td>
</tr>
<tr>
<td>IBM</td>
<td>LANGCHAIN4J_APIKEY, LANGCHAIN4J_MODELID,
LANGCHAIN4J_PROJECTID</td>
</tr>
<tr>
<td>NVIDIA</td>
<td>LANGCHAIN4J_APIKEY</td>
</tr>
<tr>
<td>TOGETHERAI</td>
<td>LANGCHAIN4J_APIKEY, LANGCHAIN4J_MODELNAME</td>
</tr>
<tr>
<td>XINFERENCE</td>
<td>LANGCHAIN4J_BASEURL, LANGCHAIN4J_MODELNAME</td>
</tr>
</tbody>
</table>
<br />
If you know your way around the LangChain4J API, other "builder"
methods can also be included in the INI file in a similar way as the
above. &nbsp;For example, to call the 'timeout' method, you would
put
LANGCHAIN4J_TIMEOUT=30 in the INI file, and the mud will just figure
out what you are trying to do.<br />
<br />
For actually using the LLM, see the MudChat guide, the "LLM" command
for Archons, and the RandomAreas guide.<br />
<h3>X.COM/Twitter</h3>
<p>CoffeeMud supports sending standard chat channel
messages,
which you have configured properly in your coffeemud.ini, to a twitter
account. &nbsp;A specific channel may be specified for this
purpose,
and can be set up so that only administrators may write to them.
&nbsp;You won't find the instructions for doing this anywhere else,
so
please follow closely.</p>
<ol>
<li>First, go to <a href="https://developer.x.com/">https://developer.x.com/</a>
, log in. &nbsp;Then go to <a href="https://developer.x.com/en/portal/dashboard/"><span style="text-decoration: underline;">https://developer.x.com/en/portal/dashboard</span></a><a href="https://developer.x.com/en/portal/dashboard/">/</a>
and create a new project, and then create a new application in that
project. &nbsp;You will need to obtain 4 different
garbly strings. The first two are obtained by following the application
creation steps. &nbsp;The last two come when you "authorize" access
to
your twitter account on behalf of the application.</li>
<ol>
<li>OAuth Consumer Key (Called API Key on x)</li>
<li>OAuth Consumer Secret (Called API Secret on X)</li>
<li>OAuth Access Token&nbsp;</li>
<li>OAuth Access Token Secret</li>
</ol>
<li>Open up your CoffeeMud/coffeemud.ini file and add the
following entries down at the bottom:<br />
<span style="font-family: monospace;">TWITTER_OAUTHCONSUMERKEY=Your
OAuth API Key<br />
TWITTER_OAUTHCONSUMERSECRET=Your OAuth API Secret</span><br style="font-family: monospace;" />
<span style="font-family: monospace;">TWITTER_OAUTHACCESSTOKEN=Your-Oauth
Access Token</span><br style="font-family: monospace;" />
<span style="font-family: monospace;">TWITTER_OAUTHACCESSTOKENSECRET=Your
Access Token Secret</span></li>
<li><span style="font-family: monospace;">Now,
still in the
coffeemud.ini file, find the entry for "CHANNELS= &nbsp;..."
&nbsp;Find
the name of the channel you want to tweet from. &nbsp;When you've
found
it, put a space and the word <span style="font-family: Courier New,Courier,monospace;">TWITTER </span>after
the name of the channel, and before the next comma or end of string.
&nbsp;Any channels with the word TWITTER in their flags list will
send
their messages to the twitter feed. &nbsp;Use the other options and
flags to limit access to this channel so that your players can't use it.</span></li>
<li>Save the coffeemud.ini file and restart your mud.<br style="font-family: monospace;" />
</li>
</ol>
<br />
<img src="images/hd.jpg" alt="packages" />
<h2><a name="package">The CoffeeMud Package</a></h2>
<p>Here is a summary of the directories inside the
CoffeeMud
package, along with some of the important files you may want to edit
when configuring your server.</p>
<img src="images/dir-com.jpg" alt="com" />
<p>The directories inside the <code>com</code>
directory contain
all the Java Class files, which are the executable portion of
CoffeeMud. All of the Java source files are also found herein.</p>
<p><img style="width: 149px; height: 77px;" src="images/dir-app.jpg" alt="applications" /></p>
<p>The application directory is where you find&nbsp;the
main executeable class files and tools.</p>
<table style="text-align: left; width: 678px; height: 192px;" border="1" cellpadding="2" cellspacing="2">
<tbody>
<tr>
<td>AutoPlayTester</td>
<td>Eventually, this will kick off javascript-driven
fake players. &nbsp;(not yet implemented)</td>
</tr>
<tr>
<td>I3Router</td>
<td>A router for the InterMud3 system.
&nbsp;(alpha)</td>
</tr>
<tr>
<td>LocalizationHelper</td>
<td>Scrapes
the java files and codebase for localizeable strings, which can then be
inserted into your translation_??_??.properties file in the
[session-translation] section. &nbsp;(See the section below on
Localization).</td>
</tr>
<tr>
<td>MUD</td>
<td>The main CoffeeMud mud server application</td>
</tr>
<tr>
<td>MUDProxy</td>
<td>An MPCP-enabled proxy server to put in front of
your mud. (see above)</td>
</tr>
<tr>
<td>OffLine</td>
<td>A
quick application you can run that reads the port numbers from your INI
file, and gives connecting players a message that the mud is down. <a href="#shutdown">(See section below for more info)</a></td>
</tr>
<tr>
<td>RebuildRefDocs</td>
<td>Rebuilds
the /guides/refs reference files from your existing classes and help
files. &nbsp;It will temporarily run the MUD in order to gain
easier
access. &nbsp;</td>
</tr>
<tr>
<td>Shutdown</td>
<td>Requires a user and password, and then sends a
secure Shutdown command to a running MUD.</td>
</tr>
<tr>
<td>VFSShell</td>
<td>Gives
you access to the full VFS (including the DBFS) from the command line,
without needing to log into the mud and use the SHELL command.
&nbsp;Does not require that the MUD be running.</td>
</tr>
</tbody>
</table>
<p></p>
<img src="images/dir-guides.jpg" alt="guides" />
<p>The <code>guides</code> directory is where
you'll find this
document, as well as other HTML documents you may find helpful in
configuring your server as well as building areas inside it.</p>
<p>The <code>guides/database</code> directory
is where you'll
find several SQL scripts necessary to configuring another database
engine, such as SQL Server, MySQL, PostgreSQL, Access, and others.</p>
<p>The <code>guides/images</code> directory
contains image files
used inside the HTML files in the guides directory.</p>
<img src="images/dir-lib.jpg" alt="lib" />
<p>The <code>lib</code> directory holds any
external libraries
or
components necessary to run CoffeeMud, but not necessarily part of the
CoffeeMud source proper. For instance, this directory holds the Mozilla
Rhino Javascript library jar file, called js.jar, as well as the zlib
library file, called jzlib.jar.</p>
<img src="images/dir-web.jpg" alt="web" />
<p>The <code>web</code> directory is where
you'll find several
important files related to the configuration of the two default web
servers: admin, and public (pub): You may want to edit them at some
point, or not. It's up to you. You'll probably be happier if you at
least look them over so you know what settings you CAN edit.</p>
<table style="text-align: left; margin-left: 0px; margin-right: auto;" border="1" width="100%">
<tbody>
<tr>
<td>admin.ini</td>
<td>The configuration file for the admin web server.
This
is the server which, by default, governs the MUDGrinder and other
server administrative pages and utilities.</td>
</tr>
<tr>
<td>common.ini</td>
<td>The configuration file for certain settings
common to
both the admin and public web servers.</td>
</tr>
<tr>
<td>pub.ini</td>
<td>The configuration file for the public web server.</td>
</tr>
<tr>
<td>email.ini</td>
<td>The configuration file for the smtp server.</td>
</tr>
</tbody>
</table>
<p>The <code>admin</code> directory is where
the pages made
available by the admin web server are found, by default. This directory
also contains the <code>admin/images</code> to store image
files
displayed by the admin pages, as well as the <code>admin/grinder</code>
directory, where the MUDGrinder pages are stored by default.</p>
<p>The <code>admin.templates</code> directory
is where the
default error page for the admin web server is found.</p>
<p>The <span style="font-family: monospace;">clan</span><code>.templates</code>
directory is where the
default clan/guild web site is found.</p>
<p>The <code>pub</code> directory is where the
pages made
available by the pub web server are found, by default. This directory
also contains the <code>pub/images</code> to store image
files
displayed by the public web pages, as well as the <code>pub/sounds</code>
directory where MSP sound files are stored for players to access.</p>
<p>The directory <span style="font-family: monospace;">pub/images/mxp</span>
contains all of the MXP displayable images, including the file <span style="font-family: monospace;">pub/images/mxp/intro.jpg</span>,
which is the image displayed when players who have MXP compliant mud
clients log into your mud. To use multiple/random intros, just insert
numbers before the extension for additional ones (intro1.jpg,
intro234.jpg)</p>
<p>The <code>pub.templates</code> directory is
where the default
error page for the pub web server is found.</p>
<img style="width: 108px; height: 245px;" src="images/dir-resources.jpg" alt="resources" />
<p>The <code>resources</code> directory is
where you'll find
most
of the important files for tinkering with the configuration of several
aspects of your system. Some of these files are in the resources
directory itself, and some are in its subdirectories. The important
files found in the resources directory are:</p>
<table style="text-align: left; margin-left: 0px; margin-right: auto;" border="1" width="100%">
<tbody>
<tr>
<td>achievements.ini</td>
<td>The configuration file for the Achievements
system.
Edit away!</td>
</tr>
<tr>
<td>chat.dat</td>
<td>The configuration file for the MudChat behavior.
You
can edit this one too.</td>
</tr>
<tr>
<td>clangovernments.xml</td>
<td>The configuration file for the Clan Types.</td>
</tr>
<tr>
<td>ipblock.ini</td>
<td>A list of all ip addresses or ip ranges to block!</td>
</tr>
<tr>
<td>laws.ini</td>
<td>The default configuration file for the Arrest
behavior.
You can edit this, but its easier to deal with law through law books.</td>
</tr>
<tr>
<td>lawtoc.ini</td>
<td>The default pages file for the GenLawBook item.</td>
</tr>
<tr>
<td>movingroom.xml</td>
<td>A sample configuration file for the MovingRoom
behavior.</td>
</tr>
<tr>
<td>parser_en_TX.properties</td>
<td>The definitions file for CoffeeMud's user-input
translation engine.</td>
</tr>
<tr>
<td>translation_en_TX.properties</td>
<td>The definitions file for CoffeeMud's user-putput
translation engine.</td>
</tr>
<tr>
<td>socials.txt</td>
<td>The text file holding all of the socials. There
is a
command line tool for updating this file.</td>
</tr>
<tr>
<td>mxp_images.ini</td>
<td>A definition table for the default image files
used for
mxp clients.</td>
</tr>
<tr>
<td valign="top">titles.ini<br />
</td>
<td valign="top">A definition file for
automatic player
titles. Can be modified directly, or with the CREATE/LIST/DESTROY TITLE
commands.<br />
</td>
</tr>
<tr>
<td>lists.ini</td>
<td>A properties file containing several
miscellaneous
charts and tables for user modification.</td>
</tr>
</tbody>
</table>
<p>The <code>resources/catalog</code>
directory is not locally
accessible, and exists only in the coffeemud database file system
(VFS). &nbsp;It is completely system generated, and contains xml
(*.cmare)
versions of all the mobs and items you use in your Catalog system.
&nbsp;See
the Archon's or Game Builder's guide for more information.</p>
<p>The <code>resources/fakedb</code> directory
is where all
area, room, mob, journal, and player data is stored when the FAKEDB
system is being used. When FAKEDB is not being used, this directory is
unused.</p>
<p>The <code>resources/examples</code>
directory is where you'll
find sample files for a variety of things.<br />
</p>
<table style="text-align: left; margin-left: 0px; margin-right: auto;" border="1" width="100%">
<tbody>
<tr>
<td>areareaction.ini</td>
<td>A template for use by the Faction system for
automatic
mob reactions based on area. &nbsp;See AUTOREACTION in your
coffeemud.ini file for more information on this system.</td>
</tr>
<tr>
<td>CustomProperty.js</td>
<td>An example Ability (acting as a Property) written
in Rhino javascript.</td>
</tr>
<tr>
<td valign="top">deities.cmare<br />
</td>
<td valign="top">A cmare file with some
example deities to
load into your mud. Use the IMPORT command to load this set of mobs.<br />
</td>
</tr>
<tr>
<td>deityreaction.ini</td>
<td>A template for use by the Faction system for
automatic deity reactions. &nbsp;See AUTOREACTION in your
coffeemud.ini file for more information on this system.</td>
</tr>
<tr>
<td valign="top">factiontemplate.ini<br />
</td>
<td valign="top">A template file for use by
the creation
wizard when new factions are created. Do not modify this file!!<br />
</td>
</tr>
<tr>
<td>FindRawMaterial.js</td>
<td>A sample Command class written in javascript as
an
example of how to write coffeemud commands in javascript. &nbsp;Use
LOAD COMMAND resources/examples/FindRawMaterial.js to install it, and
then
enter FINDRAWMATERIAL IRON at the command line to run it.</td>
</tr>
<tr>
<td>junk.cmare</td>
<td>A cmare file containing example ITEMS.
&nbsp;Used to show a sample CMARE file mostly.</td>
</tr>
<tr>
<td valign="top">Lemmings.js<br />
</td>
<td valign="top">A&nbsp;sample MOB class
written in
javascript
as an example on how to write coffeemud code. Use LOAD MOB
resources/examples/Lemming.js to load it up, and see the Programmer's
Guide for more information<br />
</td>
</tr>
<tr>
<td>LogWrite.js</td>
<td>A simple JRUNnable command for writing an
arbitrary string to the log.</td>
</tr>
<tr>
<td>manufacturers.xml</td>
<td>List of sample manufacturers for Tech game.</td>
</tr>
<tr>
<td>monsters.cmare</td>
<td>A cmare file containing example MOBs.
&nbsp;Used to show a sample CMARE file mostly.</td>
</tr>
<tr>
<td>namereaction.ini</td>
<td>A template for use by the Faction system for
automatic
mob reactions
based on mob name. &nbsp;See AUTOREACTION in your coffeemud.ini
file
for more
information on this system.</td>
</tr>
<tr>
<td>ObjectCounter.js</td>
<td>Counts the number of mobs and items and rooms in
your map. &nbsp;Use JRUN to execute.</td>
</tr>
<tr>
<td>planarreaction.ini</td>
<td>A template for use by the Faction system for
automatic
mob reactions
based on mob home plane of existence. &nbsp;See AUTOREACTION in
your coffeemud.ini
file
for more
information on this system.</td>
</tr>
<tr>
<td>QuickWho.js</td>
<td>Another sample Command class written in
javascript as
an
example of how to write coffeemud commands in javascript. &nbsp;Use
LOAD COMMAND resources/examples/QuickWho.js to install it, and then
enter QUICKWHO at the command line to run it.</td>
</tr>
<tr>
<td>racereaction.ini</td>
<td>A template for use by the Faction system for
automatic
mob reactions
based on mob race. &nbsp;See AUTOREACTION in your coffeemud.ini
file
for more
information on this system.</td>
</tr>
<tr>
<td>reputation.ini</td>
<td>Sample faction ini file,
which you may add
to the value of the FACTIONS tag in your coffeemud.ini file to make use
of.</td>
</tr>
<tr>
<td>rplists.ini</td>
<td>An example Delta to the standard lists.ini with
more role-playey values.</td>
</tr>
<tr>
<td>triumphgiver.script</td>
<td>An example MOBPROG script to make an NPC give
end-game Triumph areas to players.</td>
</tr>
</tbody>
</table>
<p>The <code>resources/factions</code>
directory is where you
should put all of your&nbsp;faction definition files. &nbsp;The
standard faction shipped with the mud, called Alignment, is found in
there.</p>
<table style="text-align: left; width: 789px; height: 95px;" border="1" cellpadding="2" cellspacing="2">
<tbody>
<tr>
<td>alignment.ini</td>
<td>Definition to the main Alignment faction
(Good/Evil/Neutral)</td>
</tr>
<tr>
<td>inclination.ini</td>
<td>Definition to the optional Inclination faction
(Lawful/Chaotic/Moderate)</td>
</tr>
<tr>
<td>triumph.ini</td>
<td>Definition for the end-game Triumph faction</td>
</tr>
</tbody>
</table>
<p>The <code>resources/help</code> directory
is where you'll
find
all of the files responsible for the numerous standard and archon HELP
entries. It also contains the two text files shown when help and ahelp
are entered without parameters. The *.ini files are formatted as java
property files, meaning that they are in ENTRY=VALUE format. The VALUE
may span several lines, so long as it ends with a backslash \. Files
that contain help entries for the ARCHELP (archon help) command all
start with arc_*, while those that do not are for the HELP (player
help) command.</p>
<table style="text-align: left; width: 787px; height: 172px;" border="1" cellpadding="2" cellspacing="2">
<tbody>
<tr>
<td>acctmenu.txt</td>
<td>The main account menu.</td>
</tr>
<tr>
<td>accts.txt</td>
<td>The help for the account menu</td>
</tr>
<tr>
<td>arc_behaviors.ini</td>
<td>Help entries for each game Behavior, available
only from AHELP.</td>
</tr>
<tr>
<td>arc_help.ini</td>
<td>Help entries for administrative Commands,
available from AHELP</td>
</tr>
<tr>
<td>arc_help.txt</td>
<td>Help text shown when no AHELP argument is given.</td>
</tr>
<tr>
<td>arc_misc.ini</td>
<td>Help entries for general administrative topics,
available from AHELP</td>
</tr>
<tr>
<td>arc_properties.ini</td>
<td>Help entries for each game Property, available
from AHELP</td>
</tr>
<tr>
<td>chant_help.ini</td>
<td>Help entries for game Chants.</td>
</tr>
<tr>
<td>common_help.ini</td>
<td>Help entries for game Common Skills</td>
</tr>
<tr>
<td>diseases.ini</td>
<td>Help entries for game Diseases</td>
</tr>
<tr>
<td>help.ini</td>
<td>Help entries for general game commands.</td>
</tr>
<tr>
<td>help.txt</td>
<td>Help text shown when no help argument is given.</td>
</tr>
<tr>
<td>misc_help.ini</td>
<td>Help entries for general topics, or topics that
don't fit elsewhere.</td>
</tr>
<tr>
<td>poisons.txt</td>
<td>Help entries for poisons.</td>
</tr>
<tr>
<td>prayer_help.ini</td>
<td>Help entries for game Prayers.</td>
</tr>
<tr>
<td>skill_help.ini</td>
<td>Help entries for game Fighter, Thief, and General
Skills.</td>
</tr>
<tr>
<td>songs_help.ini</td>
<td>Help entries for Songs, Dances, and Plays</td>
</tr>
<tr>
<td>spell_help.ini</td>
<td>Help entries for Spells.</td>
</tr>
<tr>
<td>traps.ini</td>
<td>Help entries for Traps.</td>
</tr>
<tr>
<td>zappermasks.txt</td>
<td>Help template for Zappermasks.</td>
</tr>
</tbody>
</table>
<p>The <code>resources/progs</code> directory
contains several
sample program files:<br />
</p>
<table style="text-align: left; margin-left: 0px; margin-right: auto;" border="1" width="100%">
<tbody>
<tr>
<td>autoplayer</td>
<td>Don't look in here -- it's barely even started.
&nbsp;Just junk right now.</td>
</tr>
<tr>
<td valign="top">blackjack.script<br />
</td>
<td valign="top">Sample blackjack dealer
MOBPROG. By adding LOAD=progs/blackjack.script to the parameters of a
Scriptable behavior which has been added to a genmob, you can make that
mob a blackjack dealer. See help on Scriptable for more information.<br />
</td>
</tr>
<tr>
<td>bugreport.script</td>
<td>Sample script to demand more detail from players
when entering BUGs.</td>
</tr>
<tr>
<td>changeRoomOwner.script</td>
<td>Changes the owner of the current room, assuming
it's real estate. &nbsp;Use JRUN to execute.</td>
</tr>
<tr>
<td>chardesc.script</td>
<td>A sample script to use with your coffeemud.ini
files'
CHARCREATIONSCRIPTS entry.</td>
</tr>
<tr>
<td valign="top">clearChannelQue.js<br />
</td>
<td valign="top">Sample javascript archon
command that
clears the backlog on a given chatter-channel. To use the command,
enter JRUN resources/progs/clearChannelQue.js
&lt;channel_name&gt;<br />
</td>
</tr>
<tr>
<td valign="top">coffeeanthem.script<br />
</td>
<td valign="top">Sample MOBPROG script to make
a mob sing
the CoffeeMud anthem every day. Added to mobs the same way
blackjack.script is added above.<br />
</td>
</tr>
<tr>
<td valign="top">craps.script<br />
</td>
<td valign="top">Sample MOBPROG script to make
a mob a
craps dealer. Added to mobs the same way blackjack.script is added
above.<br />
</td>
</tr>
<tr>
<td valign="top">everyoneIsHome.js<br />
</td>
<td valign="top">Sample javascript archon
command that
tests to see if any mobs are outside their home areas. To execute,
enter JRUN resources/progs/everyoneIsHome.js<br />
</td>
</tr>
<tr>
<td>everoneIsTicking.js</td>
<td>Scans the map to find NPCs that are not getting
tick-time. &nbsp;Use JRUN.</td>
</tr>
<tr>
<td valign="top">heresy.script<br />
</td>
<td valign="top">Sample MOBPROG script to make
a mob accuse anyone who enters their room of heresy. Added to mobs the
same way blackjack.script is added above. Requires that the area the
mob is home to has the Arrest behavior (to implement law in that area).<br />
</td>
</tr>
<tr>
<td valign="top">knucklebones.script<br />
</td>
<td valign="top">Sample MOBPROG script to make
a mob a
knucklebones dealer. Added to mobs the same way blackjack.script is
added above.<br />
</td>
</tr>
<tr>
<td valign="top">maxItemsRoom.js<br />
</td>
<td valign="top">Sample javascript archon
command to tell
you which rooms have the most items in them. To execute, enter JRUN
resources/progs/maxItemsRoom.js<br />
</td>
</tr>
<tr>
<td valign="top">mrinfo.script<br />
</td>
<td valign="top">Sample MOBPROG script to
demonstrate
various triggers. Added to mobs the same way blackjack.script is added
above.<br />
</td>
</tr>
<tr>
<td>peekautoawards.js</td>
<td>Reports what auto-awards a given player is
currently benefitting from. &nbsp;Use JRUN.</td>
</tr>
<tr>
<td>playerBackups.js</td>
<td>This
script, suitable for a cron job, extracts player records and generates
player xml files in a backups directory, so long as the player has
logged in in the last week or so.</td>
</tr>
<tr>
<td>scriptableTest.script</td>
<td>A MOBPROG to test various triggers in Scriptable.</td>
</tr>
<tr>
<td valign="top">strangetrader.script<br />
</td>
<td valign="top">Sample MOBPROG script to
demonstrate
various triggers. Added to mobs the same way blackjack.script is added
above.<br />
</td>
</tr>
<tr>
<td>topMonthyAwards.js</td>
<td>This script goes through the winners of the
previous months top awards and gives them an award. &nbsp;Useful as
a cron-job.</td>
</tr>
<tr>
<td>topMonthlyRpt.js</td>
<td>This
script dumps the previous months top records as xml to the
/resources/sys_reports directory.&nbsp; &nbsp;Also useful as a
cron-job.</td>
</tr>
</tbody>
</table>
<p>The <code>resources/quests</code> directory
contains several
sample quests. Each quest is in its own directory, along with any
supporting Scriptable *.script files, and any supporting mob or item
*.cmare files. The CREATE QUEST command is used to load each of these
*.quest files. Quests may also be loaded via the MUDGrinder.</p>
<table style="text-align: left; width: 788px; height: 172px;" border="1" cellpadding="2" cellspacing="2">
<tbody>
<tr>
<td>holidays/holidays.quest</td>
<td>A Quest script defining all the Holidays quests.</td>
</tr>
<tr>
<td>random/all.xml</td>
<td>Basis for sorting out random quest templates
using the random generator.</td>
</tr>
<tr>
<td>random/auto_*.xml</td>
<td>Various&nbsp;quest
templates for use with the random generator. &nbsp;Auto quests are
quests that have no questgiver and can manage their own completion and
awards.</td>
</tr>
<tr>
<td>random/normal_*.xml</td>
<td>Various&nbsp;quest
templates for use with the random generator.
&nbsp;Normal quests are quests that have a questgiver who the
player
accepts the quest from, and who gives the rewards and handles
completion.</td>
</tr>
<tr>
<td>templates/auto_*.quest</td>
<td>Various quest scripts that are filled in by the
QuestMaker, or by the random/*.xml templates. Auto quests are quests
that have no questgiver and can manage their own completion and awards.</td>
</tr>
<tr>
<td>templates/normal_*.quest</td>
<td>Various quest scripts that are filled in by the
QuestMaker, or by the random/*.xml templates.&nbsp;Normal quests
are quests that have a questgiver who the player accepts
the quest from, and who gives the rewards and handles completion.</td>
</tr>
<tr>
<td>templates/competitive_*.quest</td>
<td>Various quest scripts that are filled in by the
QuestMaker, or by the random/*.xml templates.
Competitive&nbsp;quests are quests that have a questgiver who many
players can accept the
same quest from, and who gives the rewards and handles completion, but
only to the first completer.&nbsp; </td>
</tr>
</tbody>
</table>
<p>The <code>resources/randareas</code>
directory contains
sample
random area data templates, which all end with the *.xml extension. The
sample file "example.xml" is in this directory, which contains
instructions for making new template files by hand. Random area
templates
can also be modified via the MUDGrinder.</p>
<table style="text-align: left; margin-left: 0px; margin-right: auto;" border="1" width="100%">
<tbody>
<tr>
<td>example.xml</td>
<td>A default area generation file for the GENERATE
command.</td>
</tr>
</tbody>
</table>
<p>The <code>resources/skills</code> directory
contains the
database of recipes used by the Common skills in CoffeeMud. Each text
file contains recipe for a single skill, and each is formatted in
tab-delimited format, with rows separated by carriage returns. This
directory includes:<br />
</p>
<table style="text-align: left; margin-left: 0px; margin-right: auto;" border="1" width="100%">
<tbody>
<tr>
<td>age.txt</td>
<td>A table to assist aging mobs in
race-changing/determination.</td>
</tr>
<tr>
<td valign="top">alchemy.txt</td>
<td valign="top">Recipes for the Alchemy skill<br />
</td>
</tr>
<tr>
<td>allqualifylist.txt</td>
<td>List of skills that span across all classes.</td>
</tr>
<tr>
<td>areainstancetypes.txt</td>
<td>Definitions for the Triumph system that can
modify an area instance based on faction.</td>
</tr>
<tr>
<td valign="top">armorsmith.txt</td>
<td valign="top">Recipes for the Armorsmithing
skill<br />
</td>
</tr>
<tr>
<td>atrapping.txt</td>
<td>Recipes for the AnimalTrapping skill</td>
</tr>
<tr>
<td valign="top">bake.txt</td>
<td valign="top">Recipes for the Baking skill<br />
</td>
</tr>
<tr>
<td valign="top">blacksmith.txt</td>
<td valign="top">Recipes for the Baking skill<br />
</td>
</tr>
<tr>
<td>boatwright.txt</td>
<td>Recipes for the Boatwright skill</td>
</tr>
<tr>
<td>bodypierce.txt</td>
<td>Recipes for the BodyPiercing skill</td>
</tr>
<tr>
<td>bombs.txt</td>
<td>Recipes for the Make Bomb skill</td>
</tr>
<tr>
<td valign="top">cagebuilding.txt</td>
<td valign="top">Recipes for the Blacksmithing
skill<br />
</td>
</tr>
<tr>
<td>caravanbuilding.cmare</td>
<td>CMARE file containing GenCaravan items, forming
the recipes for the CaravanBuilding skill</td>
</tr>
<tr>
<td valign="top">carpentry.txt</td>
<td valign="top">Recipes for the Carpentry
skill<br />
</td>
</tr>
<tr>
<td>clancastles.cmare</td>
<td>CMARE file containing GenCastle items, forming a
part of the recipes for the ClanCrafting skill</td>
</tr>
<tr>
<td valign="top">clancraft.txt</td>
<td valign="top">Recipes for the Clan Crafting
skill, not involving castles<br />
</td>
</tr>
<tr>
<td valign="top">cobbler.txt</td>
<td valign="top">Recipes for the Cobbler skill<br />
</td>
</tr>
<tr>
<td>colors.txt</td>
<td>Color name definitions and other 256-&gt;16
color conversions</td>
</tr>
<tr>
<td valign="top">components.txt</td>
<td valign="top">Definitions file for
spell/skill
components. Can modify this file, or use CREATE/LIST/DESRTROY
COMPONENTS commands<br />
</td>
</tr>
<tr>
<td>construction.txt</td>
<td>Recipes for the Construction skill</td>
</tr>
<tr>
<td valign="top">costume.txt</td>
<td valign="top">Recipes for the Costuming
skill<br />
</td>
</tr>
<tr>
<td>decorations.txt</td>
<td>Recipes for the Decorating skill</td>
</tr>
<tr>
<td>drugs.txt</td>
<td>Recipes for the Drug Making skill</td>
</tr>
<tr>
<td>dyeing.txt</td>
<td>Recipes for the Dyeing skill</td>
</tr>
<tr>
<td>embellishing.txt</td>
<td>Recipes for the Embellishing skill</td>
</tr>
<tr>
<td>endowgemstones.txt</td>
<td>Recipes for the Endow Gemstones skill</td>
</tr>
<tr>
<td>endowiounstone.txt</td>
<td>Recipes for the Endow iounstones skill.</td>
</tr>
<tr>
<td>excavation.txt</td>
<td>Recipes for the excavation skill.</td>
</tr>
<tr>
<td valign="top">expertises.txt</td>
<td valign="top">Definitions file for
spell/skill
expertises. Can modify this file, or use CREATE/LIST/DESTROY EXPERTISES
commands<br />
</td>
</tr>
<tr>
<td>fishing.txt</td>
<td>Recipes for the Fishing skill.</td>
</tr>
<tr>
<td valign="top">fletching.txt</td>
<td valign="top">Recipes for the Fletching
skill<br />
</td>
</tr>
<tr>
<td>floristry.txt</td>
<td>Recipes for the Floristry skill.</td>
</tr>
<tr>
<td valign="top">foodprep.txt</td>
<td valign="top">Recipes for the FoodPrep skill<br />
</td>
</tr>
<tr>
<td>gaolfood.txt</td>
<td>Recipes for the GaolFood skill</td>
</tr>
<tr>
<td valign="top">glassblowing.txt</td>
<td valign="top">Recipes for the Glass Blowing
skill<br />
</td>
</tr>
<tr>
<td>gunsmith.txt</td>
<td>Recipes for the Gunsmithing skill.</td>
</tr>
<tr>
<td valign="top">herbalism.txt</td>
<td valign="top">Recipes for the Herbalism
skill<br />
</td>
</tr>
<tr>
<td valign="top">herbology.txt</td>
<td valign="top">Recipes for the Herbology
skill<br />
</td>
</tr>
<tr>
<td>hunting.txt</td>
<td>Recipes for the Hunting skill</td>
</tr>
<tr>
<td>improvedalchemy.txt</td>
<td>Recipes for the Improved Alchemy skill</td>
</tr>
<tr>
<td>improvedherbalism.txt</td>
<td>Recipes for the Improved Herbalism skill</td>
</tr>
<tr>
<td valign="top">instruments.txt</td>
<td valign="top">Recipes for the Instruments
skill<br />
</td>
</tr>
<tr>
<td valign="top">insultd.txt</td>
<td valign="top">Insults text source file for
the Joke skill<br />
</td>
</tr>
<tr>
<td valign="top">insulto.txt</td>
<td valign="top">Other insults text source
file for the
Joke skill<br />
</td>
</tr>
<tr>
<td>irrigation.txt</td>
<td>Recipes for the Irrigation skill</td>
</tr>
<tr>
<td valign="top">jewelmaking.txt</td>
<td valign="top">Recipes for the Jewelmaking
skill<br />
</td>
</tr>
<tr>
<td>lacquering.txt</td>
<td>Recipes for the Lacquering skill</td>
</tr>
<tr>
<td>landscaping.txt</td>
<td>Recipes for the Landscaping skill</td>
</tr>
<tr>
<td valign="top">leatherworking.txt</td>
<td valign="top">Recipes for the
Leatherworking skill<br />
</td>
</tr>
<tr>
<td>legendaryweaponsmith.txt</td>
<td>Recipes for the Legendary Weaponsmithing skill</td>
</tr>
<tr>
<td valign="top">liquors.txt</td>
<td valign="top">Recipes for the Distilling
skill<br />
</td>
</tr>
<tr>
<td>masonry.txt</td>
<td>Recipes for the Masonry skill</td>
</tr>
<tr>
<td valign="top">masterarmorsmith.txt</td>
<td valign="top">Recipes for the Master
Armorsmithing skill<br />
</td>
</tr>
<tr>
<td valign="top">mastercostume.txt</td>
<td valign="top">Recipes for the Master
Costuming skill<br />
</td>
</tr>
<tr>
<td>masterdyeing.txt</td>
<td>Recipes for the Master Dyeing skill</td>
</tr>
<tr>
<td valign="top">masterleatherworking.txt</td>
<td valign="top">Recipes for the Master
Leatherworking skill<br />
</td>
</tr>
<tr>
<td valign="top">mastertailor.txt</td>
<td valign="top">Recipes for the Master
Tailoring skill<br />
</td>
</tr>
<tr>
<td valign="top">masterweaponsmith.txt</td>
<td valign="top">Recipes for the Master
Weaponsmithing skill<br />
</td>
</tr>
<tr>
<td>mtraps.txt</td>
<td>Recipes for the Minor Trap skill</td>
</tr>
<tr>
<td>mycology.txt</td>
<td>Recipes for the Mycology skill</td>
</tr>
<tr>
<td>painting.txt</td>
<td>Recipes for the Painting skill</td>
</tr>
<tr>
<td valign="top">papermaking.txt</td>
<td valign="top">Recipes for the Papermaking
skill<br />
</td>
</tr>
<tr>
<td>planesofexistence.txt</td>
<td>Recipes for Planeshift, Planar Travel, and Plane
Walk</td>
</tr>
<tr>
<td valign="top">poisons.txt</td>
<td valign="top">Recipes for the Poisons skill<br />
</td>
</tr>
<tr>
<td valign="top">pottery.txt</td>
<td valign="top">Recipes for the Pottery skill<br />
</td>
</tr>
<tr>
<td>predictions.xml</td>
<td>Recipes for the Prophecy skill, encoded as xml
scripts</td>
</tr>
<tr>
<td>racialmounts.txt</td>
<td>Guidance for the Racial Mount skill</td>
</tr>
<tr>
<td valign="top">recipes.txt</td>
<td valign="top">Recipes for the Cooking skill<br />
</td>
</tr>
<tr>
<td>rodsmithing.txt</td>
<td>Recipes for the Rodsmithing skill</td>
</tr>
<tr>
<td>scribing.txt</td>
<td>Recipes for the&nbsp;Scroll
Scribing
skill</td>
</tr>
<tr>
<td valign="top">scrimshaw.txt</td>
<td valign="top">Recipes for the Scrimshawing
skill<br />
</td>
</tr>
<tr>
<td valign="top">sculpting.txt</td>
<td valign="top">Recipes for the Sculpting
skill<br />
</td>
</tr>
<tr>
<td valign="top">shapeshift.txt<br />
</td>
<td valign="top">Recipes for Druid
shapeshifting<br />
</td>
</tr>
<tr>
<td>shardmaking.txt</td>
<td>Recipes for the Shard Making skill</td>
</tr>
<tr>
<td valign="top">shipbuilding.cmare</td>
<td valign="top">Recipes for the ShipWrighting
skill (CMAREA file of GenSailingShip items)<br />
</td>
</tr>
<tr>
<td>siegecraft.txt</td>
<td>Recipes for the Siegecraft skill</td>
</tr>
<tr>
<td valign="top">smelting.txt</td>
<td valign="top">Recipes for the Smelting skill<br />
</td>
</tr>
<tr>
<td>songlyrics.txt</td>
<td>Lyrics for Bards to sing while spellcasting.</td>
</tr>
<tr>
<td>staffmaking.txt</td>
<td>Recipes for the StaffMaking skill</td>
</tr>
<tr>
<td valign="top">tailor.txt</td>
<td valign="top">Recipes for the Tailoring
skill<br />
</td>
</tr>
<tr>
<td valign="top">taxidermy.txt</td>
<td valign="top">Recipes/Description for the
Taxidermy
skill<br />
</td>
</tr>
<tr>
<td>textiling.txt</td>
<td>Recipes for the Textiling skill</td>
</tr>
<tr>
<td valign="top">torturesmith.txt</td>
<td valign="top">Recipes for the
Torturesmithing skill<br />
</td>
</tr>
<tr>
<td>traps.txt</td>
<td>Recipes for the Make Traps skill</td>
</tr>
<tr>
<td>urchins.txt</td>
<td>Names of npcs for the Urchin skill</td>
</tr>
<tr>
<td valign="top">wainwright.txt</td>
<td valign="top">Recipes for the Wainwrighting
skill<br />
</td>
</tr>
<tr>
<td>wandmaking.txt</td>
<td>Recipes for the Wandmaking skill</td>
</tr>
<tr>
<td valign="top">weaponsmith.txt</td>
<td valign="top">Recipes for the
Weaponsmithing skill<br />
</td>
</tr>
<tr>
<td valign="top">weaving.txt</td>
<td valign="top">Recipes for the Weaving skill<br />
</td>
</tr>
<tr>
<td>welding.txt</td>
<td>Recipes for the Welding skill</td>
</tr>
<tr>
<td>wish.txt</td>
<td>Rules for the Wish/Limited Wish spells</td>
</tr>
</tbody>
</table>
<p>The <code>resources/text</code> directory
contains several
text files displayed at different points in the CoffeeMud engine. Feel
free to load these into a text editor and have at them. A summary is as
follows:</p>
<table style="text-align: left; margin-left: 0px; margin-right: auto;" border="1" width="100%">
<tbody>
<tr>
<td>alignment.txt</td>
<td>A text file describing alignment to new players.</td>
</tr>
<tr>
<td valign="top">blocked.txt<br />
</td>
<td valign="top">A file shown to someone
permanently
blocked.<br />
</td>
</tr>
<tr>
<td>classes.txt</td>
<td>A text file describing class selections for new
players.</td>
</tr>
<tr>
<td valign="top">connblocked.txt<br />
</td>
<td valign="top">A file shown to someone
temporarily
blocked.<br />
</td>
</tr>
<tr>
<td>credits.txt</td>
<td>The text file shown to users who use the CREDITS
command.</td>
</tr>
<tr>
<td>doneacct.txt</td>
<td>A file shown after account
creation, but
before character creation.</td>
</tr>
<tr>
<td valign="top">down.txt<br />
</td>
<td valign="top">The text file displayed to
users only when the
OffLine
application is running.<br />
</td>
</tr>
<tr>
<td>email.txt</td>
<td>The text shown to players during character
creation
regarding the email address prompt.</td>
</tr>
<tr>
<td>inclination.txt</td>
<td>The text shown to players before selecting an
Inclination.</td>
</tr>
<tr>
<td>intro.txt</td>
<td>The text file displayed to users when they
connect to
your mud. To use multiple/random intros, just insert numbers before the
extension for additional ones (intro1.txt, intro234.txt)</td>
</tr>
<tr>
<td>mxp.txt</td>
<td>A text file containing the complete MXP
dictionary. See <a href="Protocols.html">Protocols Guide</a>
for more information on this feature.</td>
</tr>
<tr>
<td valign="top">newacct.txt<br />
</td>
<td valign="top">A text file introducing new
accounts.<br />
</td>
</tr>
<tr>
<td valign="top">newchar.txt<br />
</td>
<td valign="top">A text file introducing your
mud to new
players.<br />
</td>
</tr>
<tr>
<td>newchardone.txt</td>
<td>A text file shown to players after they have
created
their character.</td>
</tr>
<tr>
<td valign="top">nologins.txt<br />
</td>
<td valign="top">A text file shown to
non-archons who try
to login when the LOGINS flag is disabled in the coffeemud.ini file.<br />
</td>
</tr>
<tr>
<td>offline.txt</td>
<td>A text file shown to players while your mud is
booting.</td>
</tr>
<tr>
<td>races.txt</td>
<td>A text file describing race selections to new
players.</td>
</tr>
<tr>
<td valign="top">rules.txt<br />
</td>
<td valign="top">A text file shown when
players enter the
RULES command.<br />
</td>
</tr>
<tr>
<td valign="top">selchar.txt<br />
</td>
<td valign="top">A text file shown on account
char
selection.<br />
</td>
</tr>
<tr>
<td>stats.txt</td>
<td>A text file describing the basic stats to new
players</td>
</tr>
<tr>
<td valign="top">themes.txt<br />
</td>
<td valign="top">A text file shown to users
when the
coffeemud.ini file is configured for multiple themes. Not presently
supported very well, however.<br />
</td>
</tr>
<tr>
<td>topaccounts.txt</td>
<td>Text file shown using the TOP command, displaying
all time and monthly top accounts.</td>
</tr>
<tr>
<td>topaccounts-prev.txt</td>
<td>Text file shown using the TOP command, monthly
top accounts for the previous month..</td>
</tr>
<tr>
<td>topplayers.txt</td>
<td>Text file shown using the TOP command, displaying
all time and monthly top characters.</td>
</tr>
<tr>
<td>topplayers-prev.txt</td>
<td>Text file shown using the TOP command, monthly
top characters&nbsp; for the previous month..</td>
</tr>
</tbody>
</table>
<br />
<br />
<img src="images/db.jpg" alt="database" />
<h2><a name="database">Using a Real Database</a></h2>
<p>CoffeeMud requires a database for operation. A database
is
simply the place where all the rooms, items, monsters, players, pets,
and other information is stored on the computer. Without the database,
you would have to start all over from scratch every time you booted the
MUD Server. And we all know that would be bad.</p>
<p>By default, CoffeeMud uses a custom JDBC flat-file
database
called "fakedb". FakeDB stores its data into text formatted files
inside the "resources/fakedb" directory of your CoffeeMud package.
FakeDB is rather slow, and hardly a powerful or professional database
system, but it is quite sufficient for CoffeeMud tinkerers, and
performs well the
small tasks it was designed for.</p>
<p>For the more serious, CoffeeMud supports any JDBC or
ODBC
compliant database system. This includes such systems as Microsoft
Access, Microsoft SQL Server, PostgreSQL, MySQL, HSQL, Oracle, IBM DB2,
and
others.&nbsp;</p>
<p>While
this document can not provide details instructions on every database,
there are some general points to make that might guide your setup:</p>
<ul>
<li>Create your CoffeeMud database before attempting to
use it. &nbsp;</li>
<li>Give access to a database user that has privileges
necessary to create, alter, and drop Tables, Indexes, and Keys.</li>
</ul>
<p>To use an external db, you must provide CoffeeMud with a
JDBC
compliant Driver class in the INI file (see above).&nbsp;Most
database systems have native JDBC Drivers which may be used.
&nbsp;These drivers will be in the form of a jar file (such as
"mysql-connector-java-2.0.14-bin.jar"). &nbsp;This jar file should
be
added to your mud.bat or mud.sh classpath. &nbsp;For example:</p>
<p style="font-family: monospace;" class=""><span style="padding: 0px 0px 0px 2px; background-color: rgb(255, 255, 255);"><span style="color: rgb(0, 0, 0); background-color: rgb(255, 255, 255); font-size: 10pt; white-space: pre;"></span></span>nohup
java -classpath ".:./lib/js.jar:./lib/jzlib.jar<span style="font-weight: bold;">:/path/to/mysql-connector-java-2.0.14-bin.jar</span>"
...</p>
or<br />
<br />
<span style="padding: 0px 0px 0px 2px; background-color: rgb(255, 255, 255); font-family: monospace;"><span style="color: rgb(0, 0, 0); background-color: rgb(255, 255, 255); font-size: 10pt; white-space: pre;">java<br /><br />-<span style="text-decoration: underline;">classpath</span><br /><br />".;.\<span style="text-decoration: underline;">lib</span>\js.jar;.\<span style="text-decoration: underline;">lib</span>\jzlib.jar<span style="font-weight: bold;">;</span></span></span><span style="font-family: monospace; font-weight: bold;">\path\to\mysql-connector-java-2.0.14-bin.jar</span><span style="padding: 0px 0px 0px 2px; background-color: rgb(255, 255, 255); font-family: monospace;"><span style="color: rgb(0, 0, 0); background-color: rgb(255, 255, 255); font-size: 10pt; white-space: pre;">"<br /><br />...</span></span>
<p>Your next step is to make CoffeeMud aware of your
database in your coffeemud.ini file:</p>
<p>######################################################################<br />
# JDBC Database fields<br />
######################################################################<br />
<br />
# DBCLASS is the class name of the JDBC Driver, such as
sun.jdbc.odbc.JdbcOdbcDriver<br />
# DBSERVICE is the name of the JDBC Service as defined by your local
operating system<br />
# DBUSER is a user name required to log into the JDBC service<br />
# DBPASS is the password for the above user name<br />
# DBPARMS are misc jdbc properties in the format VAR1="VALUE"
VAR2="VALUE"&nbsp; <br />
# DBCONNECTIONS is the maximum number of connections to make to the
database<br />
# DBPINGINTERVALMINS is the number of minutes between forced pings of
idle connections <br />
# DBTRANSACT true to disable auto commit and also use batch inserts<br />
# DBREUSE is true if you want the system to reuse connections instead
of making new ones</p>
<p>You should make sure you have a value for each of the
above fields. &nbsp;</p>
<p>After the above is done, you are ready to go.<br />
</p>
<p>The care and feeding of the tables used by CoffeeMud
should be
very low. &nbsp; The CoffeeMud server will inspect your database at
startup and make sure you have the necessary tables, and that they are
up to date. &nbsp;It will create your tables if they are missing,
or upgrade them if they are outdated.</p>
<p>The database will grow along with the areas created, and
along with the number of players which join your MUD. All of this
growth can be managed, however, within CoffeeMud itself, by your Archon
administrative user. You should not need to, nor should you attempt to
affect individual rows in your database for any reason.</p>
<h3><a name="access">Installing and using
Microsoft Access with
CoffeeMud on a Windows machine</a></h3>
<p>The first database CoffeeMud supports, even before
fakedb existed, was Microsoft Access. &nbsp;I am aware that no one
will ever try to use this database, but these instructions for setting
up will remain here, forever:</p>
<ul>
<li>
<p>Open up Microsoft Access and select to create a
Blank
Access Database. Give the database a name and save it on your hard
drive.</p>
</li>
<li>
<p>Under Objects, select the Queries section and select
Create Query in Design View. When the dialog box appears, click the
close button.</p>
</li>
<li>
<p>Now right click on the large grey area and select
"SQL
View" from the context Menu.</p>
</li>
<li>
<p>Inside your CoffeeMud/guides/database folder, open
up the
coffeemuddbaccess.sql file using a text editor. You will see that the
file
contains numerous blocks of sql text. Each block begins with CREATE
TABLE, and ends with a semicolon );</p>
</li>
<li>
<p>Select the first block of text in your sql file,
from the
first CREATE TABLE line down through the ); line, and select Copy from
the text editor. Paste this block into the Select Query area in
Microsoft
Access. Paste it over any other text that may be in there.</p>
</li>
<li>
<p>Press the "!" symbol at the top to execute the block
of
sql script.</p>
</li>
<li>
<p>Repeat steps 5 and 6 for the remaining CREATE TABLE
blocks
in the coffeemuddbmssql.sql file.</p>
</li>
<li>
<p>Now go to your Windows Control Panel (under XP,
switch to
Classic View) and double-click the <code>ODBC Data Sources
(32-bit)</code>
icon. If you are using Windows 2000 or XP, double-click the <code>Administrative
Tools</code> option. Then select the <code>=""&gt;Data
Sources (ODBC)</code>
icon.</p>
</li>
<li>
<p>Now, click on the <code>System DSN</code>
tab. Click the <code>Add</code>
button. This will present you with a list of drivers. Select " <code>Microsoft
Access Driver (*.mdb)</code>"</p>
</li>
<li>
<p>Here you should probably name the data source
something
sensical, like <code>CoffeeMudData</code> or the like.
Under <code>Database</code>,
click <code>Select</code>. Locate and select your <code>CoffeeMud.mdb</code>
file that you saved in step 1. Click OK and then OK to get all the way
back out of things.</p>
</li>
<li>
<p>Open coffeemud.ini. Go to where it says "JDBC
Database
fields". That section should instead look like this:<br />
</p>
<pre>DBCLASS=sun.jdbc.odbc.JdbcOdbcDriver<br />DBSERVICE=jdbc:odbc:CoffeeMudData<br />DBUSER=<br />DBPASS=<br />DBCONNECTIONS=1<br /></pre>
<p>Where it says "<code>jdbc:odbc:CoffeeMudData</code>",
make
sure the part after "<code>jdbc:odbc:</code>"
matches the DSN name you made earlier. Make sure your DBCONNECTIONS is
never set above 1 when using Microsoft Access. Now, reboot CoffeeMud,
and you are done!</p>
</li>
</ul>
<h3><a name="mysqlwin">Installing and using
MySQL with CoffeeMud
on a Windows machine</a></h3>
<ul>
<li>
<p>Go to <a href="http://www.mysql.com">www.mysql.com</a>.
Download the
latest generally available free production version.</p>
</li>
<li>
<p>Now find the MySQL Connectors / JDBC Driver on the
same site. Download the latest Connector/J, or whatever they are
calling their JDBC Driver at the time.</p>
</li>
<li>
<p>Install MySQL -- consult the web site if you are
having
problems.</p>
</li>
<li>Copy the connector/jdbc driver jar file over into
your <code>c:\coffeemud\lib</code>
folder.<code></code></li>
<li>
<p>Now, open a DOS, Command, or shell window and enter
these two commands: <br />
<span style="font-family: monospace;">cd
c:\program
files\mysql\mysql&lt;tab&gt;\bin</span><br style="font-family: monospace;" />
<span style="font-family: monospace;">mysql</span><br style="font-family: monospace;" />
You should get a Welcome to the MySQL monitor etc.
etc. etc.. and now the prompt should simply say "mysql&gt;" .
&nbsp; If you don't, you may need to specify your mysql username
and password, like: &nbsp;<span style="font-family: monospace;"><br />
mysql -uroot -pmypassword</span></p>
</li>
<li>
<p><span style="font-family: monospace;"></span>Now
enter: <br />
<span style="font-family: monospace;">create
database coffeemud;</span><br />
(please note the semi-colon";"!!!). You should get "Query OK, 1 row
affected &lt;0.11sec)" or
something like that.</p>
</li>
<li>
<p>Ensure the database user (e.g., 'root' in the example below) has
full privileges to create, alter, and drop tables, indexes, and keys in
the 'coffeemud' database. If using a non-root user, run a command like:
</p><p><span style="font-family: monospace;">GRANT ALL PRIVILEGES ON coffeemud.* TO 'youruser'@'localhost'; FLUSH PRIVILEGES</span></p></li>
<li><p>If all went well, you should now have mysql running
with a blank database ready for population.</p></li>
<li>
<p>Go back and review the Using a Real Database main
section.</p>
</li>
<li>
<p>Now go to your coffeemud folder and open your
coffeemud.ini file in a text editor, and look for the
section that says:</p>

<p><span style="font-family: monospace;">DBCLASS=com.planet_ink.fakedb.Driver</span><br style="font-family: monospace;" /><span style="font-family: monospace;">DBSERVICE=jdbc:fakedb:resources/data</span><br style="font-family: monospace;" /><span style="font-family: monospace;">DBUSER=</span><br style="font-family: monospace;" /><span style="font-family: monospace;">DBPASS=</span><br style="font-family: monospace;" /><span style="font-family: monospace;">DBCONNECTIONS=2</span><br style="font-family: monospace;" />and change it to:</p>
<pre>DBCLASS=com.mysql.jdbc.Driver<br />DBSERVICE=jdbc:mysql://localhost/coffeemud<br />DBUSER=root<br />DBPASS=mypassword (or whatever)<br />DBREUSE=TRUE<br />DBPINGINTERVALMINS=60<br />DBCONNECTIONS=4<br /></pre>
</li>
<li>Open up the mud.bat file and add the name of the
Connector/JDBC JAR
file
above to the classpath string. &nbsp;For example:</li>
<ul>
<li><span style="font-family: monospace;">java
-classpath
".;.\lib\js.jar;.\lib\jzlib.jar<span style="font-weight: bold;">;.\lib\</span></span><span style="font-family: monospace; font-weight: bold;">mysql-connector-java-5.1.6-bin.jar</span><span style="font-family: monospace;">" -Xms64m ....</span></li>
<li>** Your version of the connector jar file may vary!</li>
</ul>
<li>
<p>Now, with mysqld still running in the background,
just
launch the mud.bat.</p>
</li>
<li>Watch the log carefully. &nbsp;It should say
something about your database being empty, and then your tables
created, followed by the mud actually starting up.</li>
</ul>
<h3><a name="mysqllinux">Installing and using
MySQL with
CoffeeMud on a UN*X or Linux machine</a></h3>
<ul>
<li>
<p>Go to <a href="http://www.mysql.com/">www.mysql.com</a>.
Download the
latest generally available free production version.</p>
</li>
<li>
<p>Install MySQL, and make sure mysqld is being run at
boot time, and not by the root user.</p>
</li>
<li>
<p>Download and install the mysql jdbc api fro<span style="text-decoration: underline;"></span>m
the same web site. &nbsp;Copy the
extracted driver JAR file into&nbsp;<br />
your <span style="font-family: monospace;">/CoffeeMud/lib</span>
directory.</p>
</li>
<li>Open up the mud.sh file and add the name of the
JAR
file above to the classpath string. &nbsp;For example:</li>
<ul>
<li><span style="font-family: monospace;">nohup
java
-classpath
".:./lib/js.jar:./lib/jzlib.jar:./lib/mysql-connector-java-5.1.6-bin.jar"
-Xms65535000 ....</span></li>
<li>** Your version of the connector jar file may vary!<span style="font-family: monospace;"><br />
</span></li>
</ul>
<li>
<p>Create a coffeemud database from the shell as root
type,
"mysqladmin create coffeemud" (in this example we name the db
coffeemud). If you screw up, or need to delete the new db for some
reason, you can always do a "mysqladmin drop coffeemud".</p>
</li>
<li>
<p>Create a user for the new database (user in this
example
is called coffee). As root, type "mysql" into the shell. Now enter:<br /><span style="font-family: monospace;">
GRANT ALL ON coffeemud.* TO coffee@localhost IDENTIFIED BY "password";
</span><br />Enter a password for the user inside the quotes. Now type, "quit".</p>
</li>
<li>
<p>Edit the following settings in
CoffeeMud/coffeemud.ini:</p>
<pre>DBCLASS=com.mysql.jdbc.Driver<br />DBSERVICE=jdbc:mysql://localhost/coffeemud<br />DBUSER=coffee<br />DBPASS=password<br />DBREUSE=TRUE<br />DBPINGINTERVALMINS=60<br />DBCONNECTIONS=4<br /></pre>
<p>(no quotes on the password here)<br />
Save your changes.</p>
</li>
<li>
<p>Now, with mysqld still running in the background,
just
launch the mud.sh.</p>
</li>
<li>Watch
the log carefully. &nbsp;It should say something about your
database being
empty, and then your tables created, followed by the mud actually
starting up.</li>
</ul>
<h3><a name="hsqldb">Installing and using
HSQLDB with CoffeeMud</a></h3>
<ul>
<li> Get the database software
<p>Go to <a href="http://sourceforge.net/projects/hsqldb/">http://sourceforge.net/projects/hsqldb/</a>
and download the applicable archive.</p>
</li>
<li> Putting HSQLDB into the classpath
<p>Go into the archive that was just downloaded.
Extract the
file hsqldb.jar. This file needs to be placed into the classpath. I
merely placed it in "&lt;JRE install path&gt;\lib\ext"
(C:\Program
Files\Java\jre1.8.0_22\lib\ext on my system)</p>
</li>
<li> Creating the coffeemud database
<p>Open a command window and navigate to the root of
the
CoffeeMUD install directory.</p>
<p>Create the directory for the database to reside in
by
executing the following command (or wherever you want to call it):</p>
<pre>mkdir coffeemud<br /></pre>
<p>Now navigate into the newly created directory.</p>
<p>Next, issue the following command to start the
database
interface.</p>
<pre>java org.hsqldb.util.DatabaseManager<br /></pre>
<p>The system will respond by bringing up a small GUI
application.</p>
<p>Now we need to set up the correct parameters to
create the
database. The final parameter of the URL is the name of the database</p>
<pre>Type: HSQL Database Engine Standalone<br />Driver: org.hsqldb.jdbcDriver<br />URL: jdbc:hsqldb:file:coffeemud<br />User: &lt;whatever you want&gt;<br />Password: &lt;whatever you want&gt;<br /></pre>
<p>Now that the values have been filled in click ok.<br /><br />Ensure
the database user (e.g., 'sa' in the example configuration below) has
privileges to create, alter, and drop tables, indexes, and keys. In
HSQLDB standalone mode, the default admin user like 'sa' has these
privileges automatically; if using a custom user, connect to the
database and run SQL like: <br /><span style="font-family: monospace;">CREATE USER youruser PASSWORD 'yourpass'; followed by SET SCHEMA PUBLIC; GRANT DBA TO youruser; </span><br />to assign full admin rights.<br /></p>
<p>Now to shutdown the database and exit this utility:</p>
<pre>Open Command Menu.<br />Select SHUTDOWN.<br />Click the Execute Button.<br />Open the File Menu.<br />Select Exit.<br /></pre>
<p>The coffeemud database will exist in the folder
where the
DatabaseManager utility was run.</p>
</li>
<li> Set up CoffeeMUD to use the correct driver
<p>Open coffeemud.ini and scroll down to the ODBC
Database
fields section. Comment out the current settings (place a # in front of
them) and add the following lines below them:</p>
<pre>#here are the settings for HSQLDB<br />DBCLASS=org.hsqldb.jdbcDriver<br />DBSERVICE=jdbc:hsqldb:file:coffeemud/coffeemud<br />DBUSER=sa<br />DBPASS=<br />DBREUSE=TRUE<br />DBPINGINTERVALMINS=60<br />DBCONNECTIONS=4<br /></pre>
<p>The file: parameter of the DBSERVICE is the path to
the
database (relative from the root of the coffeemud directory) followed
by the name of the database.</p>
</li>
<li>(Options) Shut down the database gracefully:&nbsp;
Open DBConnections.java (<code>com\planet_ink\coffee_mud\core\database\</code>)
in your text editor of choice. Go to the <code>public void
killConnections()</code> function.
Before the synchronized block opens add the
following line:
<br />
<span style="font-family: monospace;"> update(
"SHUTDOWN COMPACT" );</span>
<p>Now recompile the source and it will work like a
dream...</p>
</li>
<li>Launch the mud and watch
the log carefully. &nbsp;It should say something about your
database being
empty, and then your tables created, followed by the mud actually
starting up.<br />
</li>
<li>Smile, you are done.</li>
</ul>
<h3><a name="derby">Installing and using Derby
(IBM Cloudscape)
with CoffeeMud</a></h3>
<ul>
<li> Get the database software
<p>Go to <a href="http://db.apache.org/derby/derby_downloads.html">http://db.apache.org/derby/derby_downloads.html</a>
and download the distribution( lib or bin, unless you want to build the
whole project ).</p>
</li>
<li> Putting Derby into the classpath
<p>Derby.jar and Derbytools.jar must be placed into the
classpath for them to be of any use. These archives live in the lib
subfolder of the Derby distribution. They can be placed into the root
of the CoffeeMUD folder or they can be placed into "&lt;JRE install
path&gt;\lib\ext" (C:\Program Files\Java\jdk1.8.0_22\lib\ext on my
system)</p>
</li>
<li> Creating the coffeemud database
<p>Open a command window and navigate to the root of
the
CoffeeMUD install directory. Issue the following command to start the
database interface.</p>
<pre>java org.apache.derby.tools.ij<br /></pre>
<p>The system will respond with:</p>
<pre>ij version 10.1<br />ij&gt;<br /></pre>
<p>Now we will issue the command that will create the
database.</p>
<pre>connect 'jdbc:derby:coffeemud;create=true';<br /></pre>Ensure the
database connection has privileges to create, alter, and drop tables,
indexes, and keys. In Derby's embedded mode, no explicit user is
needed, and the driver provides full privileges by default.<br /><br />Finally, we must disconnect from the database and exit the
utility.
<pre>disconnect;<br />exit;<br /></pre>
<p>The coffeemud database will exist in a folder called
'coffeemud' in the current working directory, and if CoffeeMUD is to
find it this must be the root of the coffeemud install.</p>
</li>
<li> Set up CoffeeMUD to use the correct driver
<p>Open coffeemud.ini and scroll down to the ODBC
Database
fields section. Comment out the current settings (place a # in front of
them) and add the following lines below them:</p>
<pre>#here are the settings for IBM Cloudscape/Derby/ApacheDB<br />DBCLASS=org.apache.derby.jdbc.EmbeddedDriver<br />DBSERVICE=jdbc:derby:coffeemud<br />DBREUSE=TRUE<br />DBCONNECTIONS=2<br /></pre>
</li>
<li>Launch the mud and watch
the log carefully. &nbsp;It should say something about your
database being
empty, and then your tables created, followed by the mud actually
starting up.<br />
</li>
<li>&nbsp;Smile, you are done... well mostly
<p>Currently there are some minor changes that must be
made
to the code for Derby to work properly.</p>
</li>
<li>(Optional) This step is not really necessary, it just
makes
things
cleaner. Currently when CoffeeMUD is shut down it does not exit the
database properly, I have not yet worked out a good way to fix this,
however, the following will work:
<p>Open DBConnections.java (<code>com\planet_ink\coffee_mud\core\database\</code>)
in your text editor of choice. Go to the <code>public void
killConnections()</code> function.</p>
<p>after the synchronized block closes add this:</p>
<pre> try<br /> {<br /> DriverManager.getConnection("jdbc:derby:;shutdown=true");<br /> }<br /> catch (SQLException se)<br /> {<br /> }<br /> <br /></pre>
<p>Now recompile the source and it will work like a
dream...</p>
</li>
<li> Increasing performance
<p>The basic settings for Derby end up in it being
about half
the speed of other databases. The method to correct this is simple,
however, it is very memory intensive (I upped the maximum memory for
CoffeeMUD to 512 Megs, it really only uses about 300 Megs...)</p>
<p>Before running step 4 (the creation of the
database),
create a file called 'derby.properties' in the root CoffeeMUD
directory. This file should contain:</p>
<pre># derby.properties<br />#<br />derby.storage.pageSize=32768<br />derby.storage.pageCacheSize=10000<br /></pre>
<p>When the coffeemud database is created this time it
will
run at about the same speed as other databases. More information on
these properties can be found at &lt;Derby Install
Path&gt;\doc\pdf\tuning.pdf.</p>
</li>
</ul>
<h3><a name="dbtrouble">Database
Troubleshooting</a></h3>
<p>During CoffeeMud startup, the mud server will connect to
your main database and inspect the tables to see what version they are
at. &nbsp;If it detects that the database is empty of tables, it
will attempt to create them. &nbsp;If it detects that the database
tables are not up-to-date, it will upgrade them. &nbsp;If any part
of this process fails, your mud Will Not Start. &nbsp;If this
happened to you, read on.</p>
<p>First, make certain that the user you are using for your
database has sufficient privileges to create, alter, and drop tables,
indexes, and keys. &nbsp;These are the abilities the mud server
must have to successfully create and maintain your database tables.
&nbsp;Just doing this will probably fix your problems.<br />
</p><p>Next, turn on more verbose SQL logging by adding SQLERRORS to
the DEBUG= entry in your ini file. &nbsp;During your next mud start,
SQL statements will start filling the log if errors occur.</p><p>
After that, there is little more to say. &nbsp;The ability for the
mud server to maintain its own database is fairly new, so we haven't
had enough issues reported to really know what problems you will
encounter yet.<br />
<br />
That said, there are various ways to fix your database tables when all
hope is lost.<br />
<br />
If your database is brand new: you don't have any game or player data
yet, OR you simply don't care, then you can create your database tables
from scratch using the provided schema SQL. &nbsp;These files are
located in your coffeemud install folder under /guides/database.
&nbsp;They are as follows:</p>
<ul>
<li>SQL Server ("coffeemuddbmssql.sql")&nbsp;</li>
<li>MySQL or MariaDB ("coffeemuddbmysql.sql")</li>
<li>Microsoft Access ("coffeemuddbaccess.sql")</li>
<li>PostgreSQL ("coffeemuddbpsql.sql")</li>
<li>Derby/Cloudscape ("coffeemuddbderby.sql")</li>
<li>HSQLDB ("coffeemuddbhsql.sql")</li>
<li>IBM DB2 ("coffeemudibmdb2.sql")</li>
<li>* fakedb ("fakedb.schema") &nbsp;(NOT SQL)</li>
</ul>
<p>To use them, you would need to consult your databases
client instructions on executing SQL from a file. &nbsp;In any
case, the SQL files will only create your tables, keys, and indexes, so
you would need to make sure you are running the SQL against the correct
database. &nbsp;For example, in MySQL, you would want to issue the
command "use mydatabasename" before executing the SQL Script.</p>
<p>For fakedb, you would not execute any sql, but simply
copy the above file from the guides/database directory to your
/resources/fakedb directory, and then delete all the fakedb.data.*
files.</p>
<p>Doing the above should be sufficient to get you going.</p>
<p>If you are having trouble upgrading an existing database
with lots of players and areas, and your mud fails to start because of
errors in the database upgrade process, then you have two options:</p>
<p>One option is to upgrade your database manually.
&nbsp;You would consult your database client instructions for how
to inspect your existing tables, and then compare them to the tables as
described in one of the "*.sql" files listed above for your database.
&nbsp;You would then need to manually issue the "ALTER TABLE..."
command necessary to affect the necessary change. &nbsp; If you'd
prefer, you can also open the file /guides/database/changelist.json in
a text viewer, scroll to the very bottom, and read each versions
changes, using those as a guide in how to correct your tables.</p>
<p>Another option is to run the fakedb DBCopy tool.
&nbsp;The purpose of this tool is to copy the data from one
database to another, using the fakedb schemas from two different
versions as a guide. &nbsp;It will dynamically compare the old and
new fakedb schemas to figure out exactly what data to copy.</p>
<p>The steps to using DBCopy are to </p>
<ol><li>&nbsp;Make sure you have the file
/path/to/CoffeeMud/guides/datatabase/fakedb.schema from both the OLD
version and the NEW version of your server. &nbsp;Don't mix them up!
&nbsp;</li><li>Create a NEW database in your existing system, with a new name.</li><li>In
your NEW database, run the appropriate table creation script, as
described above in this section, where it talks about re-creating a
database from scratch.</li><li>Make sure you know the path to your JDBC driver for your database system, such as '<span style="font-family: monospace;">/lib/mysql-connector-java-5.1.6-bin.jar'</span></li><li>Go into your coffeemud directory and run the DBCopy tool like:<br /><span style="font-family: monospace;">java -classpath ".:/lib/mysql-connector-java-5.1.6-bin.jar" com.planet_ink.fakedb.DBCopy<br /></span>or, for windows: <br /><span style="font-family: monospace;">java -classpath ".;/lib/mysql-connector-java-5.1.6-bin.jar" com.planet_ink.fakedb.DBCopy</span></li><li>Follow
the prompts carefully. &nbsp;It will ask you for the path to the old
and new fakedb files. &nbsp;It will ask you for information from your
coffeemud.ini, such as the DBCLASS (driver class), and the DBSERVICE.
&nbsp;When entering the DBSERVER, make sure you differentiate between
the old and new database.</li><li>When the program is done, your NEW database will have the correct schema, and all your old data.</li><li>Change
the DBSERVICE field in&nbsp;coffeemud.ini file in your new version of
coffeemud to reflect that it should connect to the new database instead
of the old one.</li><li>Away you go!</li></ol>



<br />
<img style="width: 72px; height: 72px;" src="images/unflag.jpg" alt="offline and shutdown applications" />
<h2><a name="localization">Localization</a></h2>
<p style="color: rgb(0, 0, 0); font-family: &quot;Times New Roman&quot;; font-size: medium; font-style: normal; font-weight: 400; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; widows: 2; word-spacing: 0px; white-space: normal;">Localization
is the process of replacing the existing english strings, names, and
phrases that make up the base CoffeeMud package with equivalent strings
in other human languages. &nbsp;It can also, however, be used just
to
tweak the existing english strings to have phrasing you prefer, such as
adding an extra 'u' to all the instances of the word "Color".
&nbsp;In
any case, either of those two basic use-cases can benefit from the
instructions here.</p>
<p style="color: rgb(0, 0, 0); font-family: &quot;Times New Roman&quot;; font-size: medium; font-style: normal; font-weight: 400; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; widows: 2; word-spacing: 0px; white-space: normal;">CoffeeMud
is a giant dynamic english text generating engine, so translating it to
other human languages is an enormous task. &nbsp;Many tens of
thousands
of text strings are embedded throughout the package, and many of them
are just text snippets meant to be combined together at runtime,
usually when the number of phrasing variations is far too large to list
out. &nbsp; &nbsp;And then you have pluralizing nouns,
possessive
nouns, and other linguistic rules that must be applied dynamically, as
no builder wants to have to enter numerous name forms for the same
item. &nbsp;It's just a very big task. &nbsp; But not an
impossible one.</p>
<ul>
<li>Copy the input parser file<span>&nbsp;</span><span style="font-style: italic;">resources/parser_en_TX.properties</span><span>&nbsp;</span>into
the same folder with a different language name, such as<span>&nbsp;</span><span style="font-style: italic;">resources/parser_fr_CA.properties</span><span>&nbsp;</span>for
Canadian French. &nbsp;</li>
<li>Copy the output translation file<span>&nbsp;</span><span style="font-style: italic;">resources/translation_en_TX.properties</span><span>&nbsp;</span>and
rename the copy, just like you did with the input parser file.</li>
<li>Open up coffeemud.ini file, find the entries for
LANGUAGE= and COUNTRY= and change them accordingly.</li>
<li>Go into your CoffeeMud directory from a shell and
enter:</li>
<ul style="font-family: monospace;">
<li>java
com.planet_ink.coffee_mud.application.LocalizationHelper I USE &gt;
output.txt</li>
</ul>
<ul>
<li>Remember that output.txt file. &nbsp;We will
use it again soon.</li>
</ul>
<li>Open up your copy of<span>&nbsp;</span><span style="font-style: italic;">resources/parser_??_??.properties</span><span>&nbsp;</span>and
scroll down until you see [command-word-processor] and a line
underneath it which says<span style="font-weight: bold;"><span>&nbsp;</span><span style="font-family: monospace;">#autoignore 9999</span></span>.
&nbsp;</li>
<ul>
<ul>
<li>Remove the hash mark # so that it says&nbsp;<span style="font-weight: bold; font-family: monospace;">autoignore
9999</span>. &nbsp;</li>
</ul>
<ul>
<li>Open up the <span style="font-style: italic;">output.txt</span>
and copy the contents, and then past it in&nbsp;<span></span><span style="font-style: italic;">resources/parser_??_??.properties</span>
under [command-word-processor], before the autoignore line.</li>
</ul>
<ul>
<li>For all the pasted lines that say <span style="font-family: monospace;"># REPLACEEXACT "old" with
"new"</span>,
translate all the <span style="font-family: monospace;">"new"</span>/with
parts, leaving the <span style="font-family: monospace;">"old"</span>
part unchanged.
&nbsp;</li>
<li>Remove the "#" character from the front of the
lines you change to activate
it.</li>
</ul>
<ul>
<li>Save your changes to <span style="font-style: italic;">resources/parser_??_??.properties</span>.</li>
</ul>
</ul><li>Go back into your CoffeeMud directory from a shell
and enter:<span style="font-family: monospace;"></span></li><ul>

<li><span style="font-family: monospace;">java
com.planet_ink.coffee_mud.application.LocalizationHelper T USE &gt;
output.txt</span></li>


<li>Remember that altered output.txt file.
&nbsp;We will use it again soon.</li>

</ul><li>Open up your copy of<span>&nbsp;</span><span style="font-style: italic;">resources/translation_??_??.properties</span><span>&nbsp;</span>and
scroll down until you see [session-translation] and a line underneath
it which says<span style="font-weight: bold; font-family: monospace;"><span>&nbsp;</span>#autoignore
9999</span>. &nbsp;</li><ul>

<li>Remove the hash mark # so that it says&nbsp;<span style="font-weight: bold; font-family: monospace;">autoignore
9999</span>. &nbsp;</li>


<li>Open up the <span style="font-style: italic;">output.txt</span>
and copy the contents, and then past it in&nbsp;<span></span><span style="font-style: italic;">resources/translation_??_??.properties</span>
under [session-translation], before the autoignore line.</li>


<li>For all the pasted lines that say <span style="font-family: monospace;"># REPLACEEXACT "old" with
"new"</span>, translate all the <span style="font-family: monospace;">"new"</span>/with
parts, leaving the "old" part unchanged. &nbsp;</li>
<li>Remove the "#" character from the front of the
lines you change to activate it.</li>

<li>Save the changed file.</li><ul>

</ul>
</ul>
</ul>
<p style="color: rgb(0, 0, 0); font-family: &quot;Times New Roman&quot;; font-size: medium; font-style: normal; font-weight: 400; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; widows: 2; word-spacing: 0px; white-space: normal;">Now
log into your mud as your Archon and start entering
commands.&nbsp;As
you enter commands and do things, the parser and translation files will
fill up with unlocalized strings that were not previous caught.
&nbsp;When you are satisfied you've seen every string and entered
every
command you still need&nbsp; to localize, you can stop and let your
users take care of the rest.</p>
<p style="color: rgb(0, 0, 0); font-family: &quot;Times New Roman&quot;; font-size: medium; font-style: normal; font-weight: 400; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; widows: 2; word-spacing: 0px; white-space: normal;">Last
step (for now at least), is to re-open your parser and translation
property files and find the two sections we modified earlier.
&nbsp;If
any unlocalized strings were encountered, you will see that those
sections have been appended lines like this:</p>
<p style="color: rgb(0, 0, 0); font-family: &quot;Times New Roman&quot;; font-size: medium; font-style: normal; font-weight: 400; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; widows: 2; word-spacing: 0px; white-space: normal;"><span style="font-family: monospace;">IGNOREWHOLE "You are now
speaking @x1."</span><br style="font-family: monospace;" />
<span style="font-family: monospace;">IGNOREWHOLE
"WIMPY"</span><br />
</p>
<p style="color: rgb(0, 0, 0); font-family: &quot;Times New Roman&quot;; font-size: medium; font-style: normal; font-weight: 400; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; widows: 2; word-spacing: 0px; white-space: normal;">You
want to change those lines to <span style="font-family: monospace;">REPLACEEXACT</span>
commands, while being careful to maintain case sensitivity, like this:<br />
<span style="font-family: monospace;"></span></p>
<p style="color: rgb(0, 0, 0); font-family: &quot;Times New Roman&quot;; font-size: medium; font-style: normal; font-weight: 400; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; widows: 2; word-spacing: 0px; white-space: normal;"><span style="font-family: monospace;">REPLACEEXACT "You are now
speaking @x1." WITH "Que vous parlez @x1."</span><br style="font-family: monospace;" />
<span style="font-family: monospace;">REPLACEEXACT
"WIMPY" WITH "MAUVIETTE"</span><br />
</p>
<p style="color: rgb(0, 0, 0); font-family: &quot;Times New Roman&quot;; font-size: medium; font-style: normal; font-weight: 400; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; widows: 2; word-spacing: 0px; white-space: normal;">You
can keep the <span style="font-family: monospace;">AUTOIGNORE
9999</span>
command at the bottom of the list, and it will continue to add any new
strings it encounters which were missed the first time around.</p>
<p style="color: rgb(0, 0, 0); font-family: &quot;Times New Roman&quot;; font-size: medium; font-style: normal; font-weight: 400; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; widows: 2; word-spacing: 0px; white-space: normal;">For
everything that the above does not catch, CoffeeMud supports other
languages through a translation system which utilizes regular
expressions. &nbsp;Again, read through the files
resources/parser_en_TX.properties and
resources/translation_en_TX.properties. &nbsp;The former translates
text
entered by the user, the later translates text sent TO the user.
&nbsp;Experimenting with these features will get you there, one
phrase at a
time.</p>
<p style="color: rgb(0, 0, 0); font-family: &quot;Times New Roman&quot;; font-size: medium; font-style: normal; font-weight: 400; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; widows: 2; word-spacing: 0px; white-space: normal;">After
this, it gets easy, but tedious:</p>
<ul>
<li>Localize the contents of the file&nbsp;<span style="font-style: italic;">/resources/lists.ini</span>
There's a lot -- it's not called "lists" for no reason.</li>
<li>Localize the contents of the *.ini files in
the&nbsp; /factions/ directory.</li>
<li><span style="font-family: &quot;Times New Roman&quot;;">Localize
the contents of the *.txt and *.ini files in the /help/ directory,
keeping in mind that many of the help commands should match the
translated names of those commands from your work in the parser file
above.</span></li>
<li><span style="font-family: &quot;Times New Roman&quot;;">Localize
the contents of the *.txt files in the /skills/ directory.</span></li>
<li><span style="font-family: &quot;Times New Roman&quot;;">Localize
the contents of the *.txt files in the /text/ directory.<br />
</span></li>
<li><span style="font-family: &quot;Times New Roman&quot;;">Localize
/achievements.ini, /awards.txt, /clangovernments.xml, /chat.dat,
/laws.ini, /lawtoc.ini, /movingrooom.xml, and /socials.txt</span></li>
<li><span style="font-family: &quot;Times New Roman&quot;;">Localize
all the contents of the *.html and *.cmvp files in the /web/ directory
(recursively). &nbsp;This should not take more than 10 years.</span></li>
<li><span style="font-family: &quot;Times New Roman&quot;;">Localize
the text in the *.xml files in the /randareas/ directory.</span></li>
<li><span style="font-family: &quot;Times New Roman&quot;;">Localize
the *.quest and *.xml files under the /quests/ directory (recursively)</span></li>
<li><span style="font-family: &quot;Times New Roman&quot;;">Localize
the /resources/examples/areareaction.ini, deityreaction.ini,
namereaction.ini, plarreaction.ini, racereaction.ini, reputation.ini,
and triumpgiver.script files.</span></li>
<li><span style="font-family: &quot;Times New Roman&quot;;">If
you have got here without physically dying of old age, and you tested
your results, send them to me, and I'll include them in the
distribution!<br />
</span></li>
</ul>
<span style="font-family: &quot;Times New Roman&quot;;"></span><br />
<br />
<img src="images/nuked.jpg" alt="offline and shutdown applications" />
<h2><a name="shutdown">The OffLine And
Shutdown Applications</a></h2>
<p>In the off chance you should need to keep your mud down
while
database, or other software (or hardware?) maintenance is going on, a
small footprint OffLine application is available. This application will
read the port information from your coffeemud.ini file just like the
regular mud server. It will accept connections, but only to display the
file resources/text/down.txt before disconnecting the user
automatically. To execute this application, you should go into your
coffeemud directory and enter:</p>
<pre>java com.planet_ink.coffee_mud.application.OffLine<br /></pre>
<p>The Shutdown application is a means of shutting down
your MUD
remotely without logging in. It is part of the application package of
CoffeeMud, but it does not rely on any of the other internal classes.
You may therefore, if you like, copy the file Shutdown.class onto a
floppy disk and execute it from there, so long as the file is stored in
a com/planet_ink/coffee_mud/application folder or directory.</p>
<p>The Shutdown application requires that you pass to it
the URL
of your server, the standard MUD port to connect to, the login name of
a valid Archon character, and the password. You may optionally also
include the word 'true' if you wish the system to reboot instead of
simply shutting down. To execute this application, you should go into
your coffeemud directory or wherever the "com" directory for CoffeeMud
is located, and enter:</p>
<pre>java com.planet_ink.coffee_mud.application.Shutdown localhost 5555 AdminName AdminPassword<br /><br /><br /><br /><br /></pre>
<hr style="width: 100%; height: 2px; margin-left: 0px; margin-right: auto;" /></td>
</tr>
</tbody>
</table>
</center>
</body></html>